<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-11097953181"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'AW-11097953181');

        // Google Ads conversion helper
        function gtag_report_conversion(url) {
            const callback = function () {
                if (typeof url !== 'undefined') {
                    window.location = url;
                }
            };
            gtag('event', 'conversion', {
                send_to: 'AW-11097953181/TffgCOGE_4wYEJ2n9asp',
                event_callback: callback,
            });
            return false;
        }
        window.gtag_report_conversion = gtag_report_conversion;
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‡ÙŠØ¨Ø© | Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©. Ø§ØµÙ†Ø¹ ØµÙˆØ± Ø£ØµÙŠÙ„Ø© Ù„Ù„Ø¯Ø´Ø¯Ø§Ø´Ø© ÙˆØ§Ù„Ø¨Ø´Øª ÙˆØ§Ù„Ø®Ù†Ø¬Ø±. Traditional Omani clothing AI generator for authentic dishdasha, bisht, and khanjar designs.">
    <meta name="keywords" content="Ø¹Ù…Ø§Ù†, Ø£Ø²ÙŠØ§Ø¡ Ø¹Ù…Ø§Ù†ÙŠØ©, Ø¯Ø´Ø¯Ø§Ø´Ø©, Ø¨Ø´Øª, Ø®Ù†Ø¬Ø±, Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ, Oman, Omani clothing, dishdasha, bisht, khanjar, AI generator, traditional clothing">
    <meta name="author" content="Heiba - Ù‡ÙŠØ¨Ø©">
    <meta name="robots" content="index, follow">
    <meta name="google-site-verification" content="ZHY42NDfigOZmi5XyolpRGOlfIHxoUgW44kLInXDIOg" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Ù‡ÙŠØ¨Ø© - Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ">
    <meta property="og:description" content="Ø§ØµÙ†Ø¹ ØµÙˆØ± Ø£ØµÙŠÙ„Ø© Ù„Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ">
    <meta property="og:url" content="https://haiba.store/">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://haiba.store/logo.png">
    <meta property="og:site_name" content="Heiba - Ù‡ÙŠØ¨Ø©">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Ù‡ÙŠØ¨Ø© - Omani Clothing AI Generator">
    <meta name="twitter:description" content="Generate authentic Omani traditional clothing with AI">
    <meta name="twitter:image" content="https://haiba.store/logo.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://haiba.store/">
    
    <!-- Favicon -->
    <link rel="icon" href="/logo.webp" type="image/webp">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Clerk Authentication -->
    <script>
        // Auto-detect environment: localhost = dev, haiba.store = prod
        (function() {
            const hostname = window.location.hostname;
            const isProd = hostname === 'haiba.store' || hostname === 'www.haiba.store';
            
            const publishableKey = isProd
                ? 'pk_live_Y2xlcmsuaGFpYmEuc3RvcmUk'
                : 'pk_test_bWVhc3VyZWQtY2hvdy01Ny5jbGVyay5hY2NvdW50cy5kZXYk';
            const frontendApi = isProd
                ? 'clerk.haiba.store'
                : 'wise-parakeet-29.clerk.accounts.dev';
            
            const script = document.createElement('script');
            script.async = true;
            script.crossOrigin = 'anonymous';
            script.setAttribute('data-clerk-publishable-key', publishableKey);
            script.src = `https://${frontendApi}/npm/@clerk/clerk-js@latest/dist/clerk.browser.js`;
            document.head.appendChild(script);
        })();
    </script>
    
    <style>
        /* Heiba Brand Colors - Clean & Organized */
        :root {
            /* Primary Brand Colors */
            --primary: #2C3E50;           /* Deep Indigo - Main actions */
            --primary-hover: #1a252f;     /* Darker for hover */
            --primary-light: #34495e;     /* Lighter variant */
            
            /* Accent - Use Sparingly */
            --accent: #D4AF37;            /* Rich Gold - Special highlights only */
            --accent-soft: #E8D5A3;       /* Soft gold for backgrounds */
            
            /* Neutrals */
            --text-dark: #2C3E50;         /* Main text */
            --text-medium: #5D6D7E;       /* Secondary text */
            --text-light: #95A5A6;        /* Muted text */
            
            /* Backgrounds */
            --bg-cream: #FDFBF7;          /* Main page background */
            --bg-warm: #F8F5F0;           /* Card backgrounds */
            --bg-white: #FFFFFF;          /* Pure white sections */
            
            /* Borders */
            --border-light: #E8E4DE;      /* Light borders */
            --border-medium: #D5CFC5;     /* Medium borders */
        }
        
        .font-arabic { font-family: 'Noto Sans Arabic', 'Arial Unicode MS', sans-serif; }
        .font-english { font-family: 'Inter', 'Segoe UI', sans-serif; }
        
        /* Logo tint to match brand colors */
        .logo-tint {
            filter: sepia(20%) saturate(80%) hue-rotate(180deg) brightness(0.9);
        }
        
        /* Primary gradient - elegant and subtle */
        .gradient-bg {
            background: linear-gradient(135deg, #2C3E50 0%, #34495e 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .sample-image {
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 16px;
            transition: all 0.3s ease;
        }
        
        .sample-image:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .floating-action {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 50;
        }
        
        .history-modal {
            display: none;
        }
        
        .history-modal.active {
            display: flex;
        }
        
        .refined-prompt {
            display: none;
            animation: slideDown 0.3s ease;
        }
        
        .refined-prompt.show {
            display: block;
        }
        
        .low-credits-glow {
            animation: gentle-glow 2s ease-in-out infinite alternate;
            border: 2px solid rgba(255, 165, 0, 0.6);
        }
        
        @keyframes gentle-glow {
            from { 
                box-shadow: 0 0 5px rgba(255, 165, 0, 0.5);
                background-color: rgba(255, 165, 0, 0.1);
            }
            to { 
                box-shadow: 0 0 15px rgba(255, 165, 0, 0.8);
                background-color: rgba(255, 165, 0, 0.2);
            }
        }
        
        .credit-package {
            transition: all 0.3s ease;
        }
        
        .credit-package:hover {
            transform: translateY(-2px);
        }

        /* Liquid Toggle for Ø±Ø²Ù‘Ø© / Ø·ÙŠÙ */
        .model-toggle-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 0.75rem 0;
        }

        .model-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            min-width: 70px;
            transition: all 0.4s ease;
        }

        .model-label.active .model-name {
            transform: scale(1.1);
        }

        .model-label.inactive {
            opacity: 0.5;
        }

        .model-name {
            font-size: 1.25rem;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .model-hint {
            font-size: 0.6rem;
            opacity: 0.7;
            text-align: center;
            max-width: 80px;
            line-height: 1.2;
        }

        .razza-gradient {
            background: linear-gradient(135deg, #2C3E50, #34495e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .taif-gradient {
            background: linear-gradient(135deg, #D4AF37, #E8D5A3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .liquid-toggle {
            --primary: #F8F5F0;
            --secondary: #2C3E50;
            --time: 0.5s;
            appearance: none;
            position: relative;
            cursor: pointer;
            width: 5rem;
            aspect-ratio: 2 / 1;
            background: var(--primary);
            border-radius: 20em;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.08), 0 0 0 2px #E8E4DE;
            transition: all var(--time) cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        .liquid-toggle::before {
            content: "";
            position: absolute;
            width: calc(50% - 4px);
            height: calc(100% - 8px);
            top: 4px;
            left: 4px;
            background: #2C3E50;
            border-radius: 20em;
            transition: all var(--time) cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(44, 62, 80, 0.3);
        }

        .liquid-toggle:checked {
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.08), 0 0 0 2px #E8D5A3;
        }

        .liquid-toggle:checked::before {
            left: calc(50%);
            background: #D4AF37;
            box-shadow: 0 2px 8px rgba(212, 175, 55, 0.3);
        }

        .liquid-toggle:hover {
            transform: scale(1.02);
        }

        .liquid-toggle:active {
            transform: scale(0.98);
        }
        
        .credits-display:hover {
            transform: scale(1.05);
        }
        
        /* Subtle attention animation for credits button */
        .credits-attention {
            animation: credits-pulse 3s ease-in-out 2;
        }
        
        @keyframes credits-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
            50% { 
                transform: scale(1.08);
                box-shadow: 0 0 0 8px rgba(34, 197, 94, 0.3);
            }
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .generation-status {
            display: none;
        }
        
        .generation-status.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Beautiful clean loader */
        .haiba-loader {
            width: 80px;
            height: 50px;
            position: relative;
            margin: 0 auto;
        }
        
        .haiba-loader .loader-text {
            position: absolute;
            top: 0;
            padding: 0;
            margin: 0;
            color: #2C3E50;
            animation: loaderText 3.5s ease both infinite;
            font-size: 0.75rem;
            letter-spacing: 1px;
            font-weight: 500;
        }
        
        .haiba-loader .load {
            background: #2C3E50;
            border-radius: 50px;
            display: block;
            height: 16px;
            width: 16px;
            bottom: 0;
            position: absolute;
            transform: translateX(64px);
            animation: loading 3.5s ease both infinite;
        }
        
        .haiba-loader .load::before {
            position: absolute;
            content: "";
            width: 100%;
            height: 100%;
            background: #D4AF37;
            border-radius: inherit;
            animation: loading2 3.5s ease both infinite;
        }
        
        @keyframes loaderText {
            0% { letter-spacing: 1px; transform: translateX(0px); }
            40% { letter-spacing: 2px; transform: translateX(26px); }
            80% { letter-spacing: 1px; transform: translateX(32px); }
            90% { letter-spacing: 2px; transform: translateX(0px); }
            100% { letter-spacing: 1px; transform: translateX(0px); }
        }
        
        @keyframes loading {
            0% { width: 16px; transform: translateX(0px); }
            40% { width: 100%; transform: translateX(0px); }
            80% { width: 16px; transform: translateX(64px); }
            90% { width: 100%; transform: translateX(0px); }
            100% { width: 16px; transform: translateX(0px); }
        }
        
        @keyframes loading2 {
            0% { transform: translateX(0px); width: 16px; }
            40% { transform: translateX(0%); width: 80%; }
            80% { width: 100%; transform: translateX(0px); }
            90% { width: 80%; transform: translateX(15px); }
            100% { transform: translateX(0px); width: 16px; }
        }
        
        /* Fun message animation */
        .status-message {
            animation: messageSlide 0.4s ease;
        }
        
        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen bg-[#FDFBF7] font-english">

    <!-- Top Section - Generation Area -->
    <div class="min-h-screen flex flex-col">
        
        <!-- Header -->
        <header class="glass-effect sticky top-0 z-40 border-b border-[#E8E4DE]/50" dir="ltr">
            <div class="flex items-center justify-between max-w-7xl mx-auto px-4 py-3">
                <!-- Logo - Clean & Pro -->
                <div class="flex items-center gap-3">
                    <img src="logo.webp" alt="Haiba" class="h-10 w-auto object-contain logo-tint">
                    <span class="text-xl font-bold text-[#2C3E50] tracking-tight hidden sm:block font-english">Haiba</span>
                </div>
                
                <!-- Account Area -->
                <div class="flex items-center gap-3 sm:gap-4">
                    <!-- Language Toggle -->
                    <button id="languageToggle" class="px-3 py-1.5 text-sm font-medium text-[#5D6D7E] hover:text-[#2C3E50] hover:bg-[#F8F5F0] rounded-lg transition-all">
                        <span id="languageText">En</span>
                    </button>
                    
                    <!-- Credits Display -->
                    <div id="creditsDisplay" class="hidden flex items-center gap-2 px-3 py-1.5 bg-[#F8F5F0] border border-[#E8E4DE] rounded-full cursor-pointer hover:border-[#D4AF37] transition-all credits-display" onclick="showCreditModal()">
                        <span class="text-xs font-medium text-[#5D6D7E]" id="creditsLabel" data-en="Credits" data-ar="Ø§Ù„Ø±ØµÙŠØ¯">Credits</span>
                        <span id="creditsCount" class="text-sm font-bold text-[#2C3E50]">0</span>
                        <svg id="creditsCartIcon" class="w-3.5 h-3.5 text-[#D4AF37]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                    </div>
                    
                    <!-- Auth Button -->
                    <button id="authButton" class="px-5 py-2 bg-[#2C3E50] hover:bg-[#1a252f] text-white rounded-lg text-sm font-medium transition-all shadow-sm hover:shadow-md whitespace-nowrap">
                        <span data-en="Sign In" data-ar="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Generation Section -->
        <main class="flex-1 flex items-center justify-center px-4 py-4 md:py-6">
            <div class="w-full max-w-2xl">
                
                <!-- Free Trial Banner (Pre-Login Only) -->
                <div id="freeTrialBanner" class="hidden mb-6 bg-gradient-to-r from-[#FDF8F3] to-[#F5E6D3] border-2 border-[#D4AF37] rounded-2xl p-4 text-center shadow-lg">
                    <div class="text-lg font-bold text-[#2C3E50] mb-1" data-en="Try for Free!" data-ar="Ø¬Ø±Ù‘Ø¨ Ù…Ø¬Ø§Ù†Ø§Ù‹!">Ø¬Ø±Ù‘Ø¨ Ù…Ø¬Ø§Ù†Ø§Ù‹!</div>
                    <div class="text-sm text-[#5D6D7E] mb-2" data-en="Get free credits when you sign up ğŸ" data-ar="Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø£Ø±ØµØ¯Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ğŸ">Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ 3 Ø£Ø±ØµØ¯Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ğŸ</div>
                    <div class="text-xs text-[#8B4513]" data-en="No card details required" data-ar="Ù„Ø§ Ù†Ø·Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø·Ø§Ù‚ØªÙƒ Ø£Ø¨Ø¯Ø§Ù‹">Ù„Ø§ Ù†Ø·Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø·Ø§Ù‚ØªÙƒ Ø£Ø¨Ø¯Ø§Ù‹</div>
                </div>

                <!-- Hero Text -->
                <div class="text-center mb-6">
                    <h1 class="text-3xl md:text-5xl font-bold text-gray-900 mb-3">
                        <span data-en="Create Traditional" data-ar="Ø£Ù†Ø´Ø¦ Ø£Ø²ÙŠØ§Ø¡">Ø£Ù†Ø´Ø¦ Ø£Ø²ÙŠØ§Ø¡</span><br>
                        <span class="gradient-bg bg-clip-text text-transparent" data-en="Omani Fashion" data-ar="Ø¹Ù…Ø§Ù†ÙŠØ© ØªØ±Ø§Ø«ÙŠØ©">Ø¹Ù…Ø§Ù†ÙŠØ© ØªØ±Ø§Ø«ÙŠØ©</span>
                    </h1>
                    <div class="flex justify-center mb-3">
                        <span class="text-xs bg-[#D4AF37]/20 text-[#8B4513] px-3 py-1 rounded-full font-medium" data-en="Experimental" data-ar="ØªØ¬Ø±ÙŠØ¨ÙŠ">ØªØ¬Ø±ÙŠØ¨ÙŠ</span>
                    </div>
                    <p class="text-base md:text-lg text-gray-600 leading-relaxed px-4" data-en="AI that perfects the Misar fold and Bisht elegance. Describe in text, get an image âœ¨" data-ar="Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ¶Ø¨Ø· Ù„ÙØ© Ø§Ù„Ù…ÙØµØ± ÙˆÙ‡ÙŠØ¨Ø© Ø§Ù„Ø¯Ø´Ø¯Ø§Ø´Ø© â€¢ ØµÙÙ Ø¨Ø§Ù„ÙƒÙ„Ø§Ù… ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ±Ø³Ù… Ù„Ùƒ ØµÙˆØ±Ø© âœ¨">Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ¶Ø¨Ø· Ù„ÙØ© Ø§Ù„Ù…ÙØµØ± ÙˆÙ‡ÙŠØ¨Ø© Ø§Ù„Ø¨Ø´Øª â€¢ ØµÙÙ Ø¨Ø§Ù„ÙƒÙ„Ø§Ù… ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ±Ø³Ù… Ù„Ùƒ ØµÙˆØ±Ø© âœ¨</p>
                </div>

                <!-- Generation Form -->
                <div class="bg-white/80 backdrop-blur-md rounded-3xl p-4 md:p-6 shadow-xl border border-white/20">
                    
                    <!-- Description Input -->
                    <div class="mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <label class="block text-sm font-medium text-gray-700" data-en="Describe your vision:" data-ar="ØµÙ Ø±Ø¤ÙŠØªÙƒ:">ØµÙ Ø±Ø¤ÙŠØªÙƒ:</label>
                            <button 
                                id="suggestionButton" 
                                onclick="showSuggestionPopup()" 
                                class="text-xs bg-[#D4AF37] text-white px-3 py-1 rounded-full hover:bg-[#C5A028] transition-all transform hover:scale-105 shadow-sm">
                                <span data-en="ğŸ’¡ Suggestion" data-ar="ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­">ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­</span>
                            </button>
                        </div>
                        <textarea 
                            id="description" 
                            rows="3" 
                            class="w-full px-4 py-3 border border-[#E8E4DE] rounded-xl focus:ring-2 focus:ring-[#2C3E50] focus:border-[#2C3E50] resize-none text-sm bg-white transition-all"
                            data-placeholder-en="Describe the traditional Omani clothing you want to create..."
                            data-placeholder-ar="ØµÙ Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ© Ø§Ù„ØªØ±Ø§Ø«ÙŠØ© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡Ù‡Ø§..."
                            placeholder="ØµÙ Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ© Ø§Ù„ØªØ±Ø§Ø«ÙŠØ© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡Ù‡Ø§..."></textarea>
                    </div>

                    <!-- Advanced Options (Collapsible) -->
                    <div class="mb-3">
                        <button 
                            id="toggleAdvancedOptions" 
                            onclick="toggleAdvancedOptions()" 
                            class="flex items-center justify-between w-full px-3 py-2 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors text-left">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
                                </svg>
                                <span class="text-xs font-medium text-gray-700" data-en="Advanced Options" data-ar="Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©">Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</span>
                            </div>
                            <svg id="advancedOptionsChevron" class="w-4 h-4 text-gray-500 transition-transform transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        
                        <!-- Collapsible Options Panel -->
                        <div id="advancedOptionsPanel" class="hidden mt-2 p-3 bg-gray-50 rounded-xl border border-gray-200 space-y-3">
                            
                            <!-- Model Selection - Ø±Ø²Ù‘Ø© / Ø·ÙŠÙ Toggle -->
                            <div class="model-toggle-wrapper" dir="ltr">
                                <!-- Ø±Ø²Ù‘Ø© Label (Left - default/unchecked) -->
                                <div id="razzaLabel" class="model-label active">
                                    <span class="model-name razza-gradient font-arabic">Ø±Ø²Ù‘Ø©</span>
                                    <span class="model-hint text-gray-500 font-arabic" data-en="Complex scenes" data-ar="Ù…Ø´Ø§Ù‡Ø¯ Ù…Ø¹Ù‚Ø¯Ø©">Ù…Ø´Ø§Ù‡Ø¯ Ù…Ø¹Ù‚Ø¯Ø©</span>
                                </div>
                                
                                <!-- Liquid Toggle: unchecked = Ø±Ø²Ù‘Ø© (left), checked = Ø·ÙŠÙ (right) -->
                                <input type="checkbox" id="modelToggle" class="liquid-toggle" onchange="handleModelToggle(this.checked)">
                                
                                <!-- Ø·ÙŠÙ Label (Right - checked) -->
                                <div id="taifLabel" class="model-label inactive">
                                    <span class="model-name taif-gradient font-arabic">Ø·ÙŠÙ</span>
                                    <span class="model-hint text-gray-500 font-arabic" data-en="Portraits" data-ar="ØµÙˆØ± Ø´Ø®ØµÙŠØ©">ØµÙˆØ± Ø´Ø®ØµÙŠØ©</span>
                                </div>
                            </div>
                            
                            <!-- Model Info Pills -->
                            <div id="modelInfoPills" class="flex justify-center items-center gap-3 text-[10px]" dir="ltr">
                                <span id="razzaPill" class="px-2.5 py-1 bg-[#2C3E50] text-white rounded-full flex items-center gap-1 transition-all text-[10px]">
                                    <span>âœ“</span>
                                    <span class="font-arabic" data-en="All-rounder" data-ar="Ø´Ø§Ù…Ù„">Ø´Ø§Ù…Ù„</span>
                                </span>
                                
                                <!-- Info icon with tooltip -->
                                <div class="relative group cursor-help">
                                    <svg class="w-4 h-4 text-gray-400 hover:text-gray-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <!-- Tooltip -->
                                    <div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-56 p-3 bg-gray-900 text-white text-[11px] rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                        <div class="font-arabic text-right space-y-2">
                                            <div class="flex items-start gap-2">
                                                <span class="razza-gradient font-bold">Ø±Ø²Ù‘Ø©</span>
                                                <span class="text-gray-300" data-en="Best for complex scenes, khanjar, women's clothing" data-ar="Ù„Ù„Ù…Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©ØŒ Ø§Ù„Ø®Ù†Ø¬Ø±ØŒ Ø§Ù„Ø¨Ø´Øª">Ù„Ù„Ù…Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©ØŒ Ø§Ù„Ø®Ù†Ø¬Ø±ØŒ Ø§Ù„Ø¨Ø´Øª</span>
                                            </div>
                                            <div class="border-t border-gray-700 pt-2 flex items-start gap-2">
                                                <span class="taif-gradient font-bold">Ø·ÙŠÙ</span>
                                                <span class="text-gray-300" data-en="Best for portraits, Omani faces, mussar" data-ar="Ù„Ù„ØµÙˆØ± Ø§Ù„Ø´Ø®ØµÙŠØ©ØŒ Ø§Ù„Ù…Ù„Ø§Ù…Ø­ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ù…ØµØ±">Ù„Ù„ØµÙˆØ± Ø§Ù„Ø´Ø®ØµÙŠØ©ØŒ Ø§Ù„Ù…Ù„Ø§Ù…Ø­ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ù…ØµØ±</span>
                                            </div>
                                        </div>
                                        <!-- Arrow -->
                                        <div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-gray-900"></div>
                                    </div>
                                </div>
                                
                                <span id="taifPill" class="px-2 py-1 bg-gray-100 text-gray-400 rounded-full flex items-center gap-1 transition-all">
                                    <span>âš¡</span>
                                    <span class="font-arabic" data-en="Faster" data-ar="Ø£Ø³Ø±Ø¹">Ø£Ø³Ø±Ø¹</span>
                                </span>
                            </div>
                            
                            <!-- Ø·ÙŠÙ Extra Options (hidden by default, shows with smooth animation) -->
                            <div id="taifExtraOptions" class="overflow-hidden transition-all duration-300 ease-out" style="max-height: 0; opacity: 0;">
                                
                                <!-- Speed vs Quality Toggle -->
                                <div class="space-y-2 pt-3">
                                    <label class="block text-xs font-medium text-[#5D6D7E]" data-en="Speed Mode" data-ar="ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø±Ø¹Ø©">ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø±Ø¹Ø©</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <button 
                                            id="taifQualityMode" 
                                            onclick="setGenerationMode('quality')" 
                                            class="px-3 py-2 bg-[#2C3E50] border-2 border-[#2C3E50] text-white rounded-lg text-xs font-medium transition-all flex items-center justify-center gap-1">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
                                            </svg>
                                            <span data-en="Quality" data-ar="Ø¬ÙˆØ¯Ø©">Ø¬ÙˆØ¯Ø©</span>
                                        </button>
                                        <button 
                                            id="taifFastMode" 
                                            onclick="setGenerationMode('fast')" 
                                            class="px-3 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200 flex items-center justify-center gap-1">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                            </svg>
                                            <span data-en="Fast" data-ar="Ø³Ø±ÙŠØ¹">Ø³Ø±ÙŠØ¹</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Output Format -->
                                <div class="space-y-2 pt-3">
                                    <label class="block text-xs font-medium text-[#5D6D7E]" data-en="Output Format" data-ar="ØµÙŠØºØ© Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬">ØµÙŠØºØ© Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬</label>
                                    <div class="grid grid-cols-3 gap-2">
                                        <button 
                                            onclick="setOutputFormat('webp')" 
                                            class="output-format-btn px-3 py-2 bg-[#2C3E50] border-2 border-[#2C3E50] text-white rounded-lg text-xs font-medium transition-all">
                                            <span class="font-mono">WEBP</span>
                                        </button>
                                        <button 
                                            onclick="setOutputFormat('png')" 
                                            class="output-format-btn px-3 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200">
                                            <span class="font-mono">PNG</span>
                                        </button>
                                        <button 
                                            onclick="setOutputFormat('jpg')" 
                                            class="output-format-btn px-3 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200">
                                            <span class="font-mono">JPG</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Separator -->
                            <div class="border-t border-gray-200"></div>
                            
                            <!-- Aspect Ratio -->
                            <div class="space-y-2">
                                <label class="block text-xs font-medium text-[#5D6D7E]" data-en="Image Aspect Ratio" data-ar="Ù†Ø³Ø¨Ø© Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„ØµÙˆØ±Ø©">Ù†Ø³Ø¨Ø© Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„ØµÙˆØ±Ø©</label>
                                <div class="grid grid-cols-5 gap-2">
                                    <button 
                                        onclick="setAspectRatio('1:1')" 
                                        class="aspect-ratio-btn px-2 py-2 bg-[#2C3E50] border-2 border-[#2C3E50] text-white rounded-lg text-xs font-medium transition-all flex flex-col items-center justify-center gap-1">
                                        <div class="w-5 h-5 border-2 border-current rounded-sm"></div>
                                        <span>1:1</span>
                                    </button>
                                    <button 
                                        onclick="setAspectRatio('16:9')" 
                                        class="aspect-ratio-btn px-2 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200 flex flex-col items-center justify-center gap-1">
                                        <div class="w-6 h-3 border-2 border-current rounded-sm"></div>
                                        <span>16:9</span>
                                    </button>
                                    <button 
                                        onclick="setAspectRatio('9:16')" 
                                        class="aspect-ratio-btn px-2 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200 flex flex-col items-center justify-center gap-1">
                                        <div class="w-3 h-6 border-2 border-current rounded-sm"></div>
                                        <span>9:16</span>
                                    </button>
                                    <button 
                                        onclick="setAspectRatio('4:3')" 
                                        class="aspect-ratio-btn px-2 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200 flex flex-col items-center justify-center gap-1">
                                        <div class="w-5 h-4 border-2 border-current rounded-sm"></div>
                                        <span>4:3</span>
                                    </button>
                                    <button 
                                        onclick="setAspectRatio('custom')" 
                                        class="aspect-ratio-btn px-2 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200 flex flex-col items-center justify-center gap-1">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                                        <span data-en="Custom" data-ar="Ù…Ø®ØµØµ">Ù…Ø®ØµØµ</span>
                                    </button>
                                </div>
                                <div id="customAspectInputs" class="mt-2 hidden flex gap-2 items-center">
                                    <input type="number" id="customWidth" min="128" max="2048" value="512" class="w-20 px-2 py-1 border border-gray-300 rounded text-xs" placeholder="Width">
                                    <span class="text-xs">x</span>
                                    <input type="number" id="customHeight" min="128" max="2048" value="512" class="w-20 px-2 py-1 border border-gray-300 rounded text-xs" placeholder="Height">
                                    <button onclick="applyCustomAspect()" class="px-3 py-1 bg-[#2C3E50] hover:bg-[#1a252f] text-white rounded-lg text-xs transition-all">OK</button>
                                </div>
                            </div>
                            
                            <!-- Output Format - HIDDEN: Razza always outputs PNG -->
                            <!-- 
                            <div class="space-y-2">
                                <label class="block text-xs font-medium text-gray-600" data-en="Output Format" data-ar="ØµÙŠØºØ© Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬">ØµÙŠØºØ© Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <button 
                                        onclick="setOutputFormat('webp')" 
                                        class="output-format-btn px-3 py-2 bg-white border-2 border-indigo-500 text-indigo-600 rounded-lg text-xs font-medium transition-all hover:bg-indigo-50 flex items-center justify-center gap-1">
                                        <span class="font-mono">WEBP</span>
                                        <span class="text-[10px] opacity-60" data-en="Best" data-ar="Ø£ÙØ¶Ù„">Ø£ÙØ¶Ù„</span>
                                    </button>
                                    <button 
                                        onclick="setOutputFormat('png')" 
                                        class="output-format-btn px-3 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200">
                                        <span class="font-mono">PNG</span>
                                    </button>
                                    <button 
                                        onclick="setOutputFormat('jpg')" 
                                        class="output-format-btn px-3 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200">
                                        <span class="font-mono">JPG</span>
                                    </button>
                                </div>
                            </div>
                            -->
                            
                            <!-- Info Note -->
                            <div class="flex items-start gap-2 p-2 bg-[#F8F5F0] border border-[#E8E4DE] rounded-lg">
                                <svg class="w-4 h-4 text-[#5D6D7E] mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <p class="text-[10px] text-[#5D6D7E] leading-relaxed" data-en="Choose aspect ratio for your image. 1:1 for social posts, 9:16 for stories, 16:9 for banners." data-ar="Ø§Ø®ØªØ± Ù†Ø³Ø¨Ø© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ù„ØµÙˆØ±ØªÙƒ. 1:1 Ù„Ù„Ù…Ù†Ø´ÙˆØ±Ø§ØªØŒ 9:16 Ù„Ù„Ø³ØªÙˆØ±ÙŠØŒ 16:9 Ù„Ù„Ø¨Ø§Ù†Ø±Ø§Øª.">Ø§Ø®ØªØ± Ù†Ø³Ø¨Ø© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ù„ØµÙˆØ±ØªÙƒ. 1:1 Ù„Ù„Ù…Ù†Ø´ÙˆØ±Ø§ØªØŒ 9:16 Ù„Ù„Ø³ØªÙˆØ±ÙŠØŒ 16:9 Ù„Ù„Ø¨Ø§Ù†Ø±Ø§Øª.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Generate Button -->
                    <button id="generateButton" class="w-full py-4 bg-[#2C3E50] hover:bg-[#1a252f] text-white font-semibold rounded-xl transition-all transform hover:scale-[1.01] active:scale-[0.99] shadow-lg hover:shadow-xl relative overflow-hidden">
                        <span id="generateButtonText" data-en="âœ¨ Generate Traditional Clothing" data-ar="âœ¨ Ø£Ù†Ø´Ø¦ Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„ØªØ±Ø§Ø«ÙŠØ©">âœ¨ Ø£Ù†Ø´Ø¦ Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„ØªØ±Ø§Ø«ÙŠØ©</span>
                        <span id="generateButtonLoading" class="hidden">
                            <span data-en="â³ Generating..." data-ar="â³ Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...">â³ Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...</span>
                        </span>
                    </button>

                    <!-- Refined Prompt Display (Initially Hidden, Collapsible) -->
                    <div id="refinedPrompt" class="refined-prompt mt-4 bg-[#F8F5F0] rounded-xl border border-[#E8E4DE]">
                        <button 
                            id="toggleRefinedPrompt" 
                            onclick="toggleRefinedPromptDetails()" 
                            class="w-full p-3 flex items-center justify-between text-left hover:bg-[#F0EDE8] rounded-xl transition-colors">
                            <span class="text-sm font-medium text-[#2C3E50]" data-en="ğŸ¤– AI Enhanced Prompt" data-ar="ğŸ¤– Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø­Ø³Ù† Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ">ğŸ¤– Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø­Ø³Ù† Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</span>
                            <svg id="refinedPromptChevron" class="w-4 h-4 text-[#5D6D7E] transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        <div id="refinedPromptContent" class="hidden px-4 pb-4">
                            <p id="refinedPromptText" class="text-sm text-[#5D6D7E]"></p>
                        </div>
                    </div>

                    <!-- Generation Status - Beautiful Loader -->
                    <div id="generationStatus" class="generation-status mt-6 p-6 bg-[#F8F5F0] rounded-xl border border-[#E8E4DE] text-center">
                        <!-- Animated Loader -->
                        <div class="haiba-loader mb-4">
                            <span class="loader-text">haiba</span>
                            <span class="load"></span>
                        </div>
                        
                        <!-- Status Message -->
                        <p id="statusText" class="status-message text-base font-medium text-[#2C3E50] mb-2">
                            Ø¬Ø§Ø±Ù Ø¥Ø¨Ø¯Ø§Ø¹ ØªØµÙ…ÙŠÙ…Ùƒ...
                        </p>
                        
                        <!-- Sub-message with emoji -->
                        <p id="statusSubtext" class="text-sm text-[#5D6D7E]">
                            âœ¨ Ù†Ø®ØªØ§Ø± Ø£Ø¬Ù…Ù„ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù„Ùƒ
                        </p>
                        
                        <!-- Progress bar -->
                        <div id="progressContainer" class="mt-4 px-4">
                            <div class="w-full bg-[#E8E4DE] rounded-full h-1.5 overflow-hidden">
                                <div id="progressBar" class="bg-[#2C3E50] h-1.5 rounded-full transition-all duration-700 ease-out" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Generated Image Display -->
                    <div id="imageResult" class="mt-6 hidden">
                        <div class="relative">
                            <img id="generatedImage" src="" alt="Generated Image" class="w-full rounded-2xl shadow-lg">
                            <button id="downloadImage" class="absolute top-4 right-4 p-2 bg-white/90 hover:bg-white rounded-full shadow-lg transition-colors">
                                <svg class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sample Images Preview -->
                <div class="mt-8 text-center">
                    <button id="viewSamplesButton" class="text-[#2C3E50] hover:text-[#1a252f] font-medium transition-colors" data-en="ğŸ‘‡ View Sample Creations" data-ar="ğŸ‘‡ Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬">ğŸ‘‡ Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Sample Images Section -->
    <section id="samplesSection" class="py-16 px-4 bg-white">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-gray-800" data-en="Sample Traditional Creations" data-ar="Ù†Ù…Ø§Ø°Ø¬ Ù…Ù† Ø§Ø¨Ø¯Ø§Ø¹Ø§Øª Ù…ÙˆÙ‚Ø¹Ù†Ø§">Ù†Ù…Ø§Ø°Ø¬ Ù…Ù† Ø§Ø¨Ø¯Ø§Ø¹Ø§Øª Ù…ÙˆÙ‚Ø¹Ù†Ø§</h2>
            
            <div id="sampleImagesGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
                <!-- Sample images will be randomly generated here -->
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-16 px-4 bg-gray-50">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold mb-12 text-gray-800 text-center" data-en="Carefully Designed Features" data-ar="Ù…Ø²Ø§ÙŠØ§ ØµÙÙ…ÙÙ‘Ù…Øª Ø¨Ø¹Ù†Ø§ÙŠØ©">Ù…Ø²Ø§ÙŠØ§ ØµÙÙ…ÙÙ‘Ù…Øª Ø¨Ø¹Ù†Ø§ÙŠØ©</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-8 rounded-2xl shadow-lg card-hover">
                    <div class="text-4xl mb-4">ğŸ¨</div>
                    <h3 class="text-xl font-semibold mb-4 text-gray-800" data-en="Authentic Details" data-ar="ØªÙØ§ØµÙŠÙ„ Ø£ØµÙŠÙ„Ø©">ØªÙØ§ØµÙŠÙ„ Ø£ØµÙŠÙ„Ø©</h3>
                    <p class="text-gray-600 leading-relaxed" data-en="Model fine-tuned for traditional Omani clothing with attention to patterns, colors, and Omani features." data-ar="Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ØµÙ†Ø¹ Ù„Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø¹ÙÙ…Ø§Ù†ÙŠØ© Ø§Ù„Ø±Ø¬Ø§Ù„ÙŠØ© Ù…Ø¹ Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ø§Ù„Ù†Ù‚ÙˆØ´ ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ù„Ø§Ù…Ø­ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ©.">Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ØµÙ†Ø¹ Ù„Ù„Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø¹ÙÙ…Ø§Ù†ÙŠØ© Ø§Ù„Ø±Ø¬Ø§Ù„ÙŠØ© Ù…Ø¹ Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ø§Ù„Ù†Ù‚ÙˆØ´ ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ù„Ø§Ù…Ø­ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ©.</p>
                </div>
                
                <div class="bg-white p-8 rounded-2xl shadow-lg card-hover">
                    <div class="text-4xl mb-4">ğŸ‡´ğŸ‡²</div>
                    <h3 class="text-xl font-semibold mb-4 text-gray-800" data-en="Made in Oman" data-ar="ØªØ±Ø§Ø«Ù†Ø§ ÙÙŠ Ø£ÙŠØ¯Ù Ø£Ù…ÙŠÙ†Ø©">ØªØ±Ø§Ø«Ù†Ø§ ÙÙŠ Ø£ÙŠØ¯Ù Ø£Ù…ÙŠÙ†Ø©</h3>
                    <p class="text-gray-600 leading-relaxed" data-en="Developed by an Omani team passionate about preserving the beauty of our traditional attire with cutting-edge technology" data-ar="ÙØ±ÙŠÙ‚ Ø¹ÙÙ…Ø§Ù†ÙŠ ÙŠØ¹Ù…Ù„ Ø¨Ø´ØºÙ Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø±ÙˆÙ†Ù‚ Ù„Ø¨Ø³Ù†Ø§ ÙˆØªØ·ÙˆÙŠØ±Ù‡ Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª">ÙØ±ÙŠÙ‚ Ø¹ÙÙ…Ø§Ù†ÙŠ ÙŠØ¹Ù…Ù„ Ø¨Ø´ØºÙ Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø±ÙˆÙ†Ù‚ Ù„Ø¨Ø³Ù†Ø§ ÙˆØªØ·ÙˆÙŠØ±Ù‡ Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª</p>
                </div>
                
                <div class="bg-white p-8 rounded-2xl shadow-lg card-hover">
                    <div class="text-4xl mb-4">â±ï¸</div>
                    <h3 class="text-xl font-semibold mb-4 text-gray-800" data-en="Fast & Reliable" data-ar="Ø³Ø±ÙŠØ¹ ÙˆÙ…ÙˆØ«ÙˆÙ‚">Ø³Ø±ÙŠØ¹ ÙˆÙ…ÙˆØ«ÙˆÙ‚</h3>
                    <p class="text-gray-600 leading-relaxed" data-en="Most results are completed within seconds to under a minute, depending on service load." data-ar="ØºØ§Ù„Ø¨ÙŠØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙÙ†Ø¬Ø² Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù Ø¥Ù„Ù‰ Ø£Ù‚Ù„ Ù…Ù† Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ø¨Ø­Ø³Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø©.">ØºØ§Ù„Ø¨ÙŠØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙÙ†Ø¬Ø² Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù Ø¥Ù„Ù‰ Ø£Ù‚Ù„ Ù…Ù† Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ø¨Ø­Ø³Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø©.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Floating History Button -->
    <button id="historyButton" class="floating-action bg-[#2C3E50] hover:bg-[#1a252f] text-white p-4 rounded-xl shadow-lg transition-all transform hover:scale-105 hover:shadow-xl">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
    </button>

    <!-- History Modal -->
    <div id="historyModal" class="history-modal fixed inset-0 bg-black/50 backdrop-blur-sm z-50 items-center justify-center p-4">
        <div class="bg-white rounded-3xl max-w-4xl w-full max-h-[80vh] overflow-hidden">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-xl font-bold text-gray-800" data-en="Your Creation History" data-ar="ØªØ§Ø±ÙŠØ® Ø¥Ø¨Ø¯Ø§Ø¹Ø§ØªÙƒ">ØªØ§Ø±ÙŠØ® Ø¥Ø¨Ø¯Ø§Ø¹Ø§ØªÙƒ</h3>
                    <button id="closeHistoryModal" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                
                <!-- Safety Warning -->
                <div class="bg-[#FDF8F3] border border-[#E8E4DE] rounded-xl p-3 text-center">
                    <div class="flex items-center justify-center gap-2 text-[#5D6D7E]">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="text-xs font-medium" data-en="âš ï¸ Images are automatically deleted after 1 hour for security" data-ar="âš ï¸ ØªÙØ­Ø°Ù Ø§Ù„ØµÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø£Ù…Ø§Ù†">âš ï¸ ØªÙØ­Ø°Ù Ø§Ù„ØµÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø£Ù…Ø§Ù†</span>
                    </div>
                </div>
            </div>
            <div class="p-6 overflow-y-auto max-h-[60vh]">
                <div id="historyGrid" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <!-- History items will be populated here -->
                    <div class="text-center text-gray-500 col-span-full py-8" data-en="No generations yet. Create your first traditional clothing!" data-ar="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¨Ø¯Ø§Ø¹Ø§Øª Ø¨Ø¹Ø¯. Ø£Ù†Ø´Ø¦ Ø£ÙˆÙ„ Ø£Ø²ÙŠØ§Ø¡Ùƒ Ø§Ù„ØªØ±Ø§Ø«ÙŠØ©!">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¨Ø¯Ø§Ø¹Ø§Øª Ø¨Ø¹Ø¯. Ø£Ù†Ø´Ø¦ Ø£ÙˆÙ„ Ø£Ø²ÙŠØ§Ø¡Ùƒ Ø§Ù„ØªØ±Ø§Ø«ÙŠØ©!</div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <section class="py-16 px-4 bg-white">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-gray-800">
                <span data-en="Frequently Asked Questions" data-ar="Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø©">Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø©</span>
            </h2>
            
            <div class="space-y-4">
                <!-- FAQ Item 1 -->
                <details class="group bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                    <summary class="cursor-pointer font-semibold text-gray-800 flex justify-between items-center">
                        <span data-en="Are you a registered company?" data-ar="Ù‡Ù„ Ø£Ù†ØªÙ… Ù…Ø¤Ø³Ø³Ø© Ù…Ø³Ø¬Ù„Ø©ØŸ">Ù‡Ù„ Ø£Ù†ØªÙ… Ù…Ø¤Ø³Ø³Ø© Ù…Ø³Ø¬Ù„Ø©ØŸ</span>
                        <svg class="w-5 h-5 text-gray-500 transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="mt-3 text-gray-600 leading-relaxed">
                        <span data-en="Yes! We are officially registered with the Ministry of Commerce and Industry, Commercial Registration No. 1622252" data-ar="Ø£ÙƒÙŠØ¯! Ù…Ø³Ø¬Ù„ÙŠÙ† Ø±Ø³Ù…ÙŠØ§Ù‹ ÙÙŠ ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø© ÙˆØ§Ù„ØµÙ†Ø§Ø¹Ø© Ø¨Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ø±Ù‚Ù… 1622252">Ø£ÙƒÙŠØ¯! Ù…Ø³Ø¬Ù„ÙŠÙ† Ø±Ø³Ù…ÙŠØ§Ù‹ ÙÙŠ ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø© ÙˆØ§Ù„ØµÙ†Ø§Ø¹Ø© Ø¨Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ø±Ù‚Ù… 1622252</span>
                    </p>
                </details>

                <!-- FAQ Item 2 -->
                <details class="group bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                    <summary class="cursor-pointer font-semibold text-gray-800 flex justify-between items-center">
                        <span data-en="How long does image generation take?" data-ar="ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø©ØŸ">ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø©ØŸ</span>
                        <svg class="w-5 h-5 text-gray-500 transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="mt-3 text-gray-600 leading-relaxed">
                        <span data-en="Most images are ready within 10-30 seconds, depending on server load" data-ar="Ù…Ø¹Ø¸Ù… Ø§Ù„ØµÙˆØ± ØªÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ Ù¡Ù -Ù£Ù  Ø«Ø§Ù†ÙŠØ©ØŒ Ø¹Ù„Ù‰ Ø­Ø³Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±">Ù…Ø¹Ø¸Ù… Ø§Ù„ØµÙˆØ± ØªÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ Ù¡Ù -Ù£Ù  Ø«Ø§Ù†ÙŠØ©ØŒ Ø¹Ù„Ù‰ Ø­Ø³Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±</span>
                    </p>
                </details>

                <!-- FAQ Item 3 -->
                <details class="group bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                    <summary class="cursor-pointer font-semibold text-gray-800 flex justify-between items-center">
                        <span data-en="Do credits expire?" data-ar="Ù‡Ù„ Ø§Ù„Ø±ØµÙŠØ¯ Ù„Ù‡ ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ØŸ">Ù‡Ù„ Ø§Ù„Ø±ØµÙŠØ¯ Ù„Ù‡ ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ØŸ</span>
                        <svg class="w-5 h-5 text-gray-500 transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="mt-3 text-gray-600 leading-relaxed">
                        <span data-en="Never! Your credits stay with you forever. Use them whenever you want" data-ar="Ù„Ø§ Ø£Ø¨Ø¯Ø§Ù‹! Ø±ØµÙŠØ¯Ùƒ ÙŠØ¨Ù‚Ù‰ Ù…Ø¹Ø§Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¨Ø¯ØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù‡ Ù…ØªÙ‰ ØªØ¨ØºÙ‰">Ù„Ø§ Ø£Ø¨Ø¯Ø§Ù‹! Ø±ØµÙŠØ¯Ùƒ ÙŠØ¨Ù‚Ù‰ Ù…Ø¹Ø§Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¨Ø¯ØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù‡ Ù…ØªÙ‰ ØªØ¨ØºÙ‰</span>
                    </p>
                </details>

                <!-- FAQ Item 4 -->
                <details class="group bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                    <summary class="cursor-pointer font-semibold text-gray-800 flex justify-between items-center">
                        <span data-en="Can I use the images commercially?" data-ar="Ù‡Ù„ Ø£Ù‚Ø¯Ø± Ø£Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµÙˆØ± ØªØ¬Ø§Ø±ÙŠØ§Ù‹ØŸ">Ù‡Ù„ Ø£Ù‚Ø¯Ø± Ø£Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµÙˆØ± ØªØ¬Ø§Ø±ÙŠØ§Ù‹ØŸ</span>
                        <svg class="w-5 h-5 text-gray-500 transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="mt-3 text-gray-600 leading-relaxed">
                        <span data-en="Yes! All images you generate are yours. Use them however you want - commercially or personally" data-ar="Ø£ÙƒÙŠØ¯! ÙƒÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù„ÙŠ ØªØ·Ù„Ø¹Ù‡Ø§ Ù…Ù„ÙƒÙƒØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù‡Ø§ ÙƒÙ…Ø§ ØªØ¨ØºÙ‰ - ØªØ¬Ø§Ø±ÙŠØ§Ù‹ Ø£Ùˆ Ø´Ø®ØµÙŠØ§Ù‹">Ø£ÙƒÙŠØ¯! ÙƒÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù„ÙŠ ØªØ·Ù„Ø¹Ù‡Ø§ Ù…Ù„ÙƒÙƒØŒ Ø§Ø³ØªØ®Ø¯Ù…Ù‡Ø§ ÙƒÙ…Ø§ ØªØ¨ØºÙ‰ - ØªØ¬Ø§Ø±ÙŠØ§Ù‹ Ø£Ùˆ Ø´Ø®ØµÙŠØ§Ù‹</span>
                    </p>
                </details>

                <!-- FAQ Item 5 -->
                <details class="group bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                    <summary class="cursor-pointer font-semibold text-gray-800 flex justify-between items-center">
                        <span data-en="How do I get a refund if I'm not satisfied?" data-ar="ÙƒÙŠÙ Ø£Ø³ØªØ±Ø¬Ø¹ ÙÙ„ÙˆØ³ÙŠ Ø¥Ø°Ø§ Ù…Ø§ Ø¹Ø¬Ø¨ØªÙ†ÙŠ Ø§Ù„ØµÙˆØ±Ø©ØŸ">ÙƒÙŠÙ Ø£Ø³ØªØ±Ø¬Ø¹ ÙÙ„ÙˆØ³ÙŠ Ø¥Ø°Ø§ Ù…Ø§ Ø¹Ø¬Ø¨ØªÙ†ÙŠ Ø§Ù„ØµÙˆØ±Ø©ØŸ</span>
                        <svg class="w-5 h-5 text-gray-500 transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="mt-3 text-gray-600 leading-relaxed">
                        <span data-en="Easy! Share the image and prompt with us on WhatsApp and we'll refund you - no questions asked" data-ar="Ø³Ù‡Ù„Ø©! Ø´Ø§Ø±ÙƒÙ†Ø§ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙ†Ø±Ø¬Ø¹ Ù„Ùƒ Ù‚ÙŠÙ…ØªÙ‡Ø§ Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø¦Ù„Ø©">Ø³Ù‡Ù„Ø©! Ø´Ø§Ø±ÙƒÙ†Ø§ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙ†Ø±Ø¬Ø¹ Ù„Ùƒ Ù‚ÙŠÙ…ØªÙ‡Ø§ Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø¦Ù„Ø©</span>
                    </p>
                </details>

                <!-- FAQ Item 6 -->
                <details class="group bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                    <summary class="cursor-pointer font-semibold text-gray-800 flex justify-between items-center">
                        <span data-en="How does payment work?" data-ar="ÙƒÙŠÙ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ØŸ">ÙƒÙŠÙ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ØŸ</span>
                        <svg class="w-5 h-5 text-gray-500 transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="mt-3 text-gray-600 leading-relaxed">
                        <span data-en="Transfer by phone number (77310987) under AL MAALA AL MAAWALI and send us the receipt on WhatsApp. Your credits will be added within 24 hours" data-ar="ØªØ­ÙˆÙŠÙ„ Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (77310987) Ø¨Ø§Ø³Ù… AL MAALA AL MAAWALI ÙˆØªØ±Ø³Ù„ Ù„Ù†Ø§ Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨. Ø®Ù„Ø§Ù„ Ù¢Ù¤ Ø³Ø§Ø¹Ø© ÙŠØ¶Ø§Ù Ø±ØµÙŠØ¯Ùƒ">ØªØ­ÙˆÙŠÙ„ Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (77310987) Ø¨Ø§Ø³Ù… AL MAALA AL MAAWALI ÙˆØªØ±Ø³Ù„ Ù„Ù†Ø§ Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨. Ø®Ù„Ø§Ù„ Ù¢Ù¤ Ø³Ø§Ø¹Ø© ÙŠØ¶Ø§Ù Ø±ØµÙŠØ¯Ùƒ</span>
                    </p>
                </details>

                <!-- FAQ Item 7 -->
                <details class="group bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors">
                    <summary class="cursor-pointer font-semibold text-gray-800 flex justify-between items-center">
                        <span data-en="How long until my credits are added?" data-ar="ÙƒÙ… Ø§Ù„Ù…Ø¯Ø© Ø­ØªÙ‰ ÙŠØ¶Ø§Ù Ø±ØµÙŠØ¯ÙŠØŸ">ÙƒÙ… Ø§Ù„Ù…Ø¯Ø© Ø­ØªÙ‰ ÙŠØ¶Ø§Ù Ø±ØµÙŠØ¯ÙŠØŸ</span>
                        <svg class="w-5 h-5 text-gray-500 transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="mt-3 text-gray-600 leading-relaxed">
                        <span data-en="Usually within minutes! In rare cases it may take up to 24 hours. If you're in a hurry, just message us on WhatsApp and we'll prioritize your request" data-ar="Ø¹Ø§Ø¯Ø©Ù‹ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚! ÙÙŠ Ø­Ø§Ù„Ø§Øª Ù†Ø§Ø¯Ø±Ø© Ù‚Ø¯ ØªØµÙ„ Ø§Ù„Ù…Ø¯Ø© Ø¥Ù„Ù‰ Ù¢Ù¤ Ø³Ø§Ø¹Ø©. Ø¥Ø°Ø§ Ù…Ø³ØªØ¹Ø¬Ù„ØŒ Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ">Ø¹Ø§Ø¯Ø©Ù‹ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚! ÙÙŠ Ø­Ø§Ù„Ø§Øª Ù†Ø§Ø¯Ø±Ø© Ù‚Ø¯ ØªØµÙ„ Ø§Ù„Ù…Ø¯Ø© Ø¥Ù„Ù‰ Ù¢Ù¤ Ø³Ø§Ø¹Ø©. Ø¥Ø°Ø§ Ù…Ø³ØªØ¹Ø¬Ù„ØŒ Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ </span>
                    </p>
                </details>
            </div>
        </div>
    </section>

    <!-- Share Section -->
    <section class="py-16 px-4 bg-gradient-to-br from-[#FDF8F3] via-[#F5E6D3] to-[#EDE4D8]">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-8">
                <div class="text-5xl mb-4">âœ¨</div>
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-[#2C3E50]">
                    <span data-en="Like what you see?" data-ar="Ø¹Ø¬Ø¨Ùƒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŸ">Ø¹Ø¬Ø¨Ùƒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŸ</span>
                </h2>
                <p class="text-xl text-[#3E3E3E] font-medium mb-2">
                    <span data-en="Share it with your friends!" data-ar="Ø´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø±Ø¨Ø¹Ùƒ!">Ø´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø±Ø¨Ø¹Ùƒ!</span>
                </p>
                <p class="text-[#5D6D7E] max-w-2xl mx-auto leading-relaxed">
                    <span data-en="Help us preserve our heritage by sharing" data-ar="Ø³Ø§Ø¹Ø¯Ù†Ø§ ÙÙŠ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ ØªØ±Ø§Ø«Ù†Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©">Ø³Ø§Ø¹Ø¯Ù†Ø§ ÙÙŠ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ ØªØ±Ø§Ø«Ù†Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©</span>
                </p>
            </div>

            <!-- Share Message Box -->
            <div class="bg-white rounded-2xl p-6 shadow-lg border-2 border-[#E8E4DE] mb-6 max-w-2xl mx-auto">
                <div class="text-center mb-4">
                    <p class="text-[#3E3E3E] font-medium mb-3">
                        <span data-en="Best AI for drawing the Misar - Share now!" data-ar="Ø£Ø­Ø³Ù† Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ±Ø³Ù… Ø§Ù„Ù…ÙØµØ± â€” Ø´Ø§Ø±Ùƒ Ø§Ù„Ø­ÙŠÙ†!">Ø£Ø­Ø³Ù† Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ±Ø³Ù… Ø§Ù„Ù…ÙØµØ± â€” Ø´Ø§Ø±Ùƒ Ø§Ù„Ø­ÙŠÙ†!</span>
                    </p>
                </div>

                <!-- Share Buttons -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <!-- WhatsApp Share -->
                    <button onclick="shareOnWhatsApp()" class="flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-[#25D366] to-[#128C7E] text-white font-semibold rounded-xl hover:from-[#20BD5A] hover:to-[#0F7A6E] transition-all transform hover:scale-105 shadow-md">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                        </svg>
                        <span data-en="WhatsApp" data-ar="ÙˆØ§ØªØ³Ø§Ø¨">ÙˆØ§ØªØ³Ø§Ø¨</span>
                    </button>

                    <!-- General Share -->
                    <button onclick="shareGeneral()" class="flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-[#2C3E50] to-[#3d566e] text-white font-semibold rounded-xl hover:from-[#1a252f] hover:to-[#2C3E50] transition-all transform hover:scale-105 shadow-md">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                        </svg>
                        <span data-en="Share" data-ar="Ù…Ø´Ø§Ø±ÙƒØ©">Ù…Ø´Ø§Ø±ÙƒØ©</span>
                    </button>

                    <!-- Copy Link -->
                    <button onclick="copyWebsiteLink(event)" class="flex items-center justify-center gap-2 px-4 py-3 bg-[#2C3E50] text-white font-semibold rounded-xl hover:bg-[#1a252f] transition-all transform hover:scale-105 shadow-md">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
                        </svg>
                        <span data-en="Copy Link" data-ar="Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·">Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</span>
                    </button>
                </div>

                <!-- Website Link Display -->
                <div class="mt-4 p-3 bg-[#F8F5F0] rounded-lg border border-[#E8E4DE]">
                    <div class="flex items-center justify-center gap-2 text-sm text-[#5D6D7E]">
                        <span class="font-mono text-[#2C3E50] font-semibold">www.haiba.store</span>
                    </div>
                </div>
            </div>

            <!-- Appreciation Message -->
            <div class="text-center">
                <p class="text-[#5D6D7E] text-sm">
                    <span data-en="Every share helps us preserve Omani heritage ğŸ‡´ğŸ‡²" data-ar="ÙƒÙ„ Ù…Ø´Ø§Ø±ÙƒØ© ØªØ³Ø§Ø¹Ø¯Ù†Ø§ ÙÙŠ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø§Ø« Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ ğŸ‡´ğŸ‡²">ÙƒÙ„ Ù…Ø´Ø§Ø±ÙƒØ© ØªØ³Ø§Ø¹Ø¯Ù†Ø§ ÙÙŠ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø§Ø« Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ ğŸ‡´ğŸ‡²</span>
                </p>
            </div>
        </div>
    </section>

    <!-- Enterprise Section -->
    <section class="py-16 px-4 bg-gradient-to-br from-[#FDF8F3] to-[#F5E6D3]">
        <div class="max-w-4xl mx-auto text-center">
            <div class="inline-block p-2 bg-[#2C3E50] rounded-full mb-4">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                </svg>
            </div>
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-800">
                <span data-en="For Businesses & Organizations" data-ar="Ù„Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø§Øª">Ù„Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø§Øª</span>
            </h2>
            <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed">
                <span data-en="Need high volume or custom solutions? We offer special packages for businesses with dedicated support and competitive pricing" data-ar="ØªØ­ØªØ§Ø¬ ÙƒÙ…ÙŠØ§Øª ÙƒØ¨ÙŠØ±Ø© Ø£Ùˆ Ø­Ù„ÙˆÙ„ Ù…Ø®ØµØµØ©ØŸ Ù†ÙˆÙØ± Ø¨Ø§Ù‚Ø§Øª Ø®Ø§ØµØ© Ù„Ù„Ø´Ø±ÙƒØ§Øª Ù…Ø¹ Ø¯Ø¹Ù… Ù…Ø®ØµØµ ÙˆØ£Ø³Ø¹Ø§Ø± ØªÙ†Ø§ÙØ³ÙŠØ©">ØªØ­ØªØ§Ø¬ ÙƒÙ…ÙŠØ§Øª ÙƒØ¨ÙŠØ±Ø© Ø£Ùˆ Ø­Ù„ÙˆÙ„ Ù…Ø®ØµØµØ©ØŸ Ù†ÙˆÙØ± Ø¨Ø§Ù‚Ø§Øª Ø®Ø§ØµØ© Ù„Ù„Ø´Ø±ÙƒØ§Øª Ù…Ø¹ Ø¯Ø¹Ù… Ù…Ø®ØµØµ ÙˆØ£Ø³Ø¹Ø§Ø± ØªÙ†Ø§ÙØ³ÙŠØ©</span>
            </p>
            <button onclick="showEnterpriseContact()" class="px-8 py-3 bg-gradient-to-r from-[#2C3E50] to-[#8B4513] text-white font-bold rounded-xl hover:from-[#1a252f] hover:to-[#6d3410] transition-all transform hover:scale-105 shadow-lg">
                <span data-en="Contact Us" data-ar="ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</span>
            </button>
        </div>
    </section>

    <!-- Developer Section - Small Link -->
    <div class="py-6 px-4 bg-gray-50 border-t border-gray-200">
        <div class="max-w-6xl mx-auto text-center">
            <button onclick="showDeveloperInfo()" class="text-sm text-gray-600 hover:text-[#8B4513] transition-colors cursor-pointer flex items-center justify-center gap-2 mx-auto">
                <span>ğŸ‘¨â€ğŸ’»</span>
                <span data-en="About the Developer" data-ar="Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±">Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±</span>
                <span class="text-xs">â†’</span>
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 px-4">
        <div class="max-w-6xl mx-auto">
            <!-- Social & Contact -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <!-- Contact Info -->
                <div class="text-center md:text-left">
                    <h3 class="text-lg font-bold mb-4">
                        <span data-en="Contact Us" data-ar="ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</span>
                    </h3>
                    <div class="space-y-2 text-gray-300 text-sm">
                        <a href="https://wa.me/96877310987" target="_blank" class="flex items-center justify-center md:justify-start gap-2 hover:text-green-400 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                            </svg>
                            <span>77310987</span>
                        </a>
                        <a href="mailto:haiba.auth@gmail.com" class="flex items-center justify-center md:justify-start gap-2 hover:text-[#D4AF37] transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                            <span>haiba.auth@gmail.com</span>
                        </a>
                    </div>
                </div>

                <!-- Social Media -->
                <div class="text-center">
                    <h3 class="text-lg font-bold mb-4">
                        <span data-en="Follow Us" data-ar="ØªØ§Ø¨Ø¹Ù†Ø§">ØªØ§Ø¨Ø¹Ù†Ø§</span>
                    </h3>
                    <div class="flex justify-center gap-4">
                        <a href="https://www.instagram.com/haiba_auth/" target="_blank" class="w-10 h-10 bg-[#2C3E50] hover:bg-[#1a252f] rounded-xl flex items-center justify-center hover:scale-110 transition-all">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Legal Info -->
                <div class="text-center md:text-right">
                    <h3 class="text-lg font-bold mb-4">
                        <span data-en="Legal" data-ar="Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©</span>
                    </h3>
                    <div class="text-gray-300 text-sm space-y-1">
                        <p>
                            <span data-en="CR No." data-ar="Ø³.Øª">Ø³.Øª</span>: 1622252
                        </p>
                        <p class="text-xs text-gray-400">
                            <span data-en="Ministry of Commerce & Industry" data-ar="ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø© ÙˆØ§Ù„ØµÙ†Ø§Ø¹Ø©">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø© ÙˆØ§Ù„ØµÙ†Ø§Ø¹Ø©</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Enterprise Link -->
            <div class="border-t border-gray-800 pt-6 pb-4 text-center">
                <button onclick="showEnterpriseContact()" class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-[#2C3E50] hover:bg-[#1a252f] text-white text-sm font-medium transition-all shadow-sm hover:shadow-md">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                    <span data-en="Contact Us for Enterprise" data-ar="ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù„Ø´Ø±ÙƒØ§Øª">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù„Ø´Ø±ÙƒØ§Øª</span>
                </button>
            </div>

            <!-- Copyright -->
            <div class="border-t border-gray-800 pt-6 text-center">
                <p class="text-sm text-gray-400">Â© 2025 Ù‡ÙŠØ¨Ø© â€” ØµÙÙ†Ø¹ Ø¨Ø­Ø¨ Ù„ØªØ±Ø§Ø«Ù†Ø§</p>
            </div>
        </div>
    </footer>

    <!-- Message Display -->
    <div id="messageContainer" class="fixed top-20 right-4 z-50"></div>

    <!-- Soft Notification Popup -->
    <div id="aiMessagePlaceholder" class="hidden fixed bottom-20 left-4 right-4 bg-white/90 backdrop-blur-md border border-[#E8E4DE] rounded-2xl p-4 z-40 shadow-xl">
    </div>



    <!-- Developer Info Modal -->
    <div id="developerModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl max-w-md w-full p-6 transform transition-all">
            <div class="flex justify-between items-start mb-4">
                <h3 class="text-xl font-bold flex items-center gap-2">
                    <span>ğŸ‘¨â€ğŸ’»</span>
                    <span data-en="About the Developer" data-ar="Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±">Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±</span>
                </h3>
                <button onclick="hideDeveloperInfo()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="space-y-4 text-sm" id="developerContent">
                <!-- Arabic Content -->
                <div class="ar-content">
                    <p class="leading-relaxed flex items-start gap-2">
                        <span>ğŸ“</span>
                        <span>ØµÙÙ†Ø¹ Ø¨Ø­Ø¨ Ù…Ù† Ø·Ø§Ù„Ø¨ ÙÙŠ Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø³Ù„Ø·Ø§Ù† Ù‚Ø§Ø¨ÙˆØ³ - Ø§Ù„Ù…Ø¹ÙˆÙ„ÙŠ</span>
                    </p>
                    <p class="leading-relaxed flex items-start gap-2">
                        <span>ğŸ¤–</span>
                        <span>Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ØªØ¬Ø±ÙŠØ¨ÙŠ Ø£ÙˆÙ„ÙŠØŒ Ù†Ø¹Ø±Ù Ø­Ø¯ÙˆØ¯Ù‡ ÙˆØ£Ø®Ø·Ø§Ø¡Ù‡ØŒ Ù„ÙƒÙ† Ù†Ø­Ù† ÙÙŠ Ø±Ø­Ù„Ø© ØªØ·ÙˆÙŠØ± Ù…Ø³ØªÙ…Ø±Ø©!</span>
                    </p>
                    <p class="leading-relaxed flex items-start gap-2">
                        <span>ğŸš€</span>
                        <span>Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ù‚Ø§Ø¯Ù…Ø©... ØªØ±Ù‚Ø¨ÙˆØ§!</span>
                    </p>
                    <p class="text-xs opacity-75 flex items-start gap-2 mt-4 p-3 bg-gray-50 rounded-xl">
                        <span>ğŸ“§</span>
                        <span>Ù„Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª: <a href="mailto:haiba.auth@gmail.com" class="text-[#2C3E50] hover:underline font-medium">haiba.auth@gmail.com</a></span>
                    </p>
                </div>
                
                <!-- English Content (hidden by default) -->
                <div class="en-content hidden">
                    <p class="leading-relaxed flex items-start gap-2">
                        <span>ğŸ“</span>
                        <span>Crafted with passion by an SQU student - Al Maawali</span>
                    </p>
                    <p class="leading-relaxed flex items-start gap-2">
                        <span>ğŸ¤–</span>
                        <span>This is our first experimental model. We know its quirks and limitations, but we're on an exciting journey of continuous improvement!</span>
                    </p>
                    <p class="leading-relaxed flex items-start gap-2">
                        <span>ğŸš€</span>
                        <span>More updates and enhancements coming soon... stay tuned!</span>
                    </p>
                    <p class="text-xs opacity-75 flex items-start gap-2 mt-4 p-3 bg-gray-50 rounded-xl">
                        <span>ğŸ“§</span>
                        <span>Feedback & suggestions: <a href="mailto:haiba.auth@gmail.com" class="text-[#2C3E50] hover:underline font-medium">haiba.auth@gmail.com</a></span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Prompt Suggestion Modal -->
    <div id="suggestionModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white/95 backdrop-blur-sm rounded-3xl p-6 max-w-lg w-full shadow-2xl transform transition-all">
            <div class="text-center mb-4">
                <h3 class="text-xl font-bold text-gray-800 mb-2">
                    <span data-en="ğŸ’¡ Suggested Prompt" data-ar="ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ù„Ù‡Ù…">ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ù„Ù‡Ù…</span>
                </h3>
                <p class="text-gray-600 text-sm">
                    <span data-en="Try this dramatic warrior prompt" data-ar="Ø¬Ø±Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ù…Ù„Ø­Ù…ÙŠ">Ø¬Ø±Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ù…Ù„Ø­Ù…ÙŠ</span>
                </p>
            </div>
            
            <!-- Warrior Prompt -->
            <div class="bg-gradient-to-br from-[#FDF8F3] to-[#F5E6D3] border-2 border-[#E8E4DE] rounded-2xl p-4 mb-4">
                <div class="text-sm text-[#2C3E50] font-medium mb-2">
                    <span data-en="ğŸ—¡ï¸ Omani Warrior" data-ar="ğŸ—¡ï¸ Ù…Ø­Ø§Ø±Ø¨ Ø¹ÙÙ…Ø§Ù†ÙŠ">ğŸ—¡ï¸ Ù…Ø­Ø§Ø±Ø¨ Ø¹ÙÙ…Ø§Ù†ÙŠ</span>
                </div>
                <p class="text-[#3E3E3E] leading-relaxed font-arabic" id="warriorPromptText">
                    Ù…Ø­Ø§Ø±Ø¨ Ø¹ÙÙ…Ø§Ù†ÙŠ ÙŠØ­Ù…Ù„ Ù†Ø¯ÙˆØ¨ Ø§Ù„Ù…Ø¹Ø§Ø±ÙƒØŒ Ù…Ù„Ø·Ø® Ø¨Ø§Ù„ØªØ±Ø§Ø¨ ÙˆØ§Ù„Ø¹Ø±Ù‚ØŒ ÙŠÙ„ÙˆÙ‘Ø­ Ø¨Ø§Ù„Ø£Ø³Ù„Ø­Ø© Ø§Ù„Ø¹ÙÙ…Ø§Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© ÙÙŠ Ù…Ø´Ù‡Ø¯ Ø¯Ø±Ø§Ù…ÙŠ Ù…Ù„ÙŠØ¡ Ø¨Ø§Ù„Ø­Ø±ÙƒØ©ØŒ ØªØªÙ†Ø§Ø«Ø± ÙÙŠÙ‡ Ø§Ù„Ø´Ø±Ø± ÙˆØ§Ù„Ø¯Ø®Ø§Ù†ØŒ Ù…Ø¹ Ø¥Ø¶Ø§Ø¡Ø© Ù…Ù„Ø­Ù…ÙŠØ©.
                </p>
            </div>
            
            <div class="flex gap-3">
                <button 
                    onclick="useSuggestedPrompt()" 
                    class="flex-1 py-3 bg-gradient-to-r from-[#2C3E50] to-[#3d566e] text-white rounded-xl font-medium hover:from-[#1a252f] hover:to-[#2C3E50] transition-all transform hover:scale-105">
                    <span data-en="âœ¨ Use This Prompt" data-ar="âœ¨ Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­">âœ¨ Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­</span>
                </button>
                <button 
                    onclick="closeSuggestionModal()" 
                    class="px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors">
                    <span data-en="Cancel" data-ar="Ø¥Ù„ØºØ§Ø¡">Ø¥Ù„ØºØ§Ø¡</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Credit Purchase Modal -->
    <div id="creditPurchaseModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white/95 backdrop-blur-sm rounded-3xl max-w-md w-full shadow-2xl transform transition-all max-h-[90vh] flex flex-col overflow-hidden">
            <!-- Modal Content - Scrollable -->
            <div class="overflow-y-auto overflow-x-hidden p-6 flex-1">
                <!-- Swipeable Container -->
                <div id="modalContainer" class="relative transition-transform duration-300 ease-out" style="transform: translateX(0);">
                    
                    <!-- Page 1: Credit Packages -->
                    <div id="page1" class="w-full">
                        <!-- Upsell Message (shown when out of credits) -->
                        <div id="upsellBanner" class="hidden mb-4 bg-[#F8F5F0] border border-[#D4AF37] rounded-xl p-4 text-center">
                            <div class="text-base font-bold text-[#2C3E50] mb-1">
                                <span data-en="Your images look amazing! ğŸ˜" data-ar="ØµÙˆØ±Ùƒ Ø·Ù„Ø¹Øª Ø±ÙˆØ¹Ø©! ğŸ˜">ØµÙˆØ±Ùƒ Ø·Ù„Ø¹Øª Ø±ÙˆØ¹Ø©! ğŸ˜</span>
                            </div>
                            <div class="text-sm text-[#5D6D7E] leading-relaxed">
                                <span data-en="Choose a package that suits you and continue creating â€” easy and safe" data-ar="Ø§Ø®ØªØ± Ø¨Ø§Ù‚Ø© ØªÙ†Ø§Ø³Ø¨Ùƒ ÙˆÙƒÙ…Ù‘Ù„ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ â€” Ø³Ù‡Ù„ ÙˆØ¢Ù…Ù†">Ø§Ø®ØªØ± Ø¨Ø§Ù‚Ø© ØªÙ†Ø§Ø³Ø¨Ùƒ ÙˆÙƒÙ…Ù‘Ù„ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ â€” Ø³Ù‡Ù„ ÙˆØ¢Ù…Ù†</span>
                            </div>
                        </div>
                        
                        <div class="text-center mb-4">
                            <h3 class="text-xl font-bold text-gray-800 mb-1">
                                <span data-en="Add Credits" data-ar="Ø´Ø±Ø§Ø¡ Ø±ØµÙŠØ¯">Ø´Ø±Ø§Ø¡ Ø±ØµÙŠØ¯</span>
                            </h3>
                            <p class="text-gray-600 text-xs">
                                <span data-en="Choose your credit package" data-ar="Ø§Ø®ØªØ± Ø¨Ø§Ù‚Ø© Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©">Ø§Ø®ØªØ± Ø¨Ø§Ù‚Ø© Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</span>
                            </p>
                        </div>
            
            <!-- Refund Guarantee Badge -->
            <div class="mb-4 bg-gradient-to-r from-[#FDF8F3] to-[#F5E6D3] border-2 border-[#D4AF37] rounded-xl p-3 text-center">
                <div class="text-sm font-bold text-[#2C3E50] mb-1">
                    <span data-en="ğŸ’¯ Satisfaction Guarantee" data-ar="ğŸ’¯ Ø¶Ù…Ø§Ù† Ø§Ù„Ø±Ø¶Ø§">ğŸ’¯ Ø¶Ù…Ø§Ù† Ø§Ù„Ø±Ø¶Ø§</span>
                </div>
                <div class="text-xs text-[#5D6D7E] leading-relaxed">
                    <span data-en="If you're not happy with an image, share it with us and we'll refund youâ€”no questions asked" data-ar="Ø§Ø°Ø§ Ù…Ø§ Ø¹Ø¬Ø¨ØªÙƒ ØµÙˆØ±Ø©ØŒ Ø´Ø§Ø±ÙƒÙ†Ø§ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„ÙˆØµÙ ÙˆÙ†Ø±Ø¯ Ù‚ÙŠÙ…ØªÙ‡Ø§ Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø¦Ù„Ø©">Ø§Ø°Ø§ Ù…Ø§ Ø¹Ø¬Ø¨ØªÙƒ ØµÙˆØ±Ø©ØŒ Ø´Ø§Ø±ÙƒÙ†Ø§ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„ÙˆØµÙ ÙˆÙ†Ø±Ø¯ Ù‚ÙŠÙ…ØªÙ‡Ø§ Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø¦Ù„Ø©</span>
                </div>
            </div>

            <!-- Credit Packages -->
            <div class="space-y-2 mb-4">
                <!-- Starter Plan -->
                <button onclick="buyCredits(1, 0.1)" class="credit-package w-full p-4 rounded-xl border border-[#E8E4DE] hover:border-[#2C3E50] bg-white transition-all flex justify-between items-center hover:shadow-md">
                    <div class="text-left">
                        <div class="font-semibold text-sm text-[#2C3E50]">
                            <span data-en="âœ¨ Starter" data-ar="âœ¨ ØªØ¬Ø±ÙŠØ¨ÙŠ">âœ¨ ØªØ¬Ø±ÙŠØ¨ÙŠ</span>
                        </div>
                        <div class="text-xs text-[#5D6D7E]">
                            <span data-en="Risk-free trial" data-ar="Ø¨Ø¯ÙˆÙ† Ù…Ø®Ø§Ø·Ø±Ø© â€” Ø¬Ø±Ù‘Ø¨ Ø¨Ù€100 Ø¨ÙŠØ³Ø© Ø¨Ø³">Ø¨Ø¯ÙˆÙ† Ù…Ø®Ø§Ø·Ø±Ø© â€” Ø¬Ø±Ù‘Ø¨ Ø¨Ù€100 Ø¨ÙŠØ³Ø© Ø¨Ø³</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-[#2C3E50]">
                            <span data-en="100 Baisa" data-ar="100 Ø¨ÙŠØ³Ø©">100 Ø¨ÙŠØ³Ø©</span>
                        </div>
                        <div class="text-xs text-[#95A5A6]">1 <span data-en="credit" data-ar="Ø±ØµÙŠØ¯">Ø±ØµÙŠØ¯</span></div>
                    </div>
                </button>
                
                <!-- Basic Plan -->
                <button onclick="buyCredits(10, 1)" class="credit-package w-full p-3 rounded-lg border-2 border-[#E8E4DE] hover:border-[#2C3E50] transition-all flex justify-between items-center hover:shadow-md">
                    <div class="text-left">
                        <div class="font-semibold text-sm">
                            <span data-en="ğŸ’« Basic" data-ar="ğŸ’« Ø£Ø³Ø§Ø³ÙŠ">ğŸ’« Ø£Ø³Ø§Ø³ÙŠ</span>
                        </div>
                        <div class="text-xs text-gray-600">
                            <span data-en="Perfect for personal use" data-ar="Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ø®ØµÙŠ">Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ø®ØµÙŠ</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-[#2C3E50]">1 <span data-en="OMR" data-ar="Ø±ÙŠØ§Ù„">Ø±ÙŠØ§Ù„</span></div>
                        <div class="text-xs text-gray-500">10 <span data-en="credits" data-ar="Ø£Ø±ØµØ¯Ø©">Ø£Ø±ØµØ¯Ø©</span></div>
                    </div>
                </button>
                
                <!-- Pro Plan (Popular) -->
                <button onclick="buyCredits(25, 2)" class="credit-package popular w-full p-3 rounded-lg border-2 border-[#D4AF37] bg-[#FDFBF7] transition-all flex justify-between items-center hover:shadow-md relative">
                    <div class="absolute -top-2 -right-2 bg-gradient-to-r from-[#D4AF37] to-[#8B4513] text-white text-xs px-2 py-1 rounded-full shadow-lg">
                        <span data-en="ğŸ”¥ Most Popular" data-ar="ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹">ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</span>
                    </div>
                    <div class="text-left">
                        <div class="font-semibold text-sm">
                            <span data-en="âš¡ Pro" data-ar="âš¡ Ø§Ø­ØªØ±Ø§ÙÙŠ">âš¡ Ø§Ø­ØªØ±Ø§ÙÙŠ</span>
                        </div>
                        <div class="text-xs text-[#8B4513]">
                            <span data-en="Best value for creators" data-ar="Ø£ÙØ¶Ù„ Ù‚ÙŠÙ…Ø© Ù„Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†">Ø£ÙØ¶Ù„ Ù‚ÙŠÙ…Ø© Ù„Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-[#D4AF37]">2 <span data-en="OMR" data-ar="Ø±ÙŠØ§Ù„">Ø±ÙŠØ§Ù„</span></div>
                        <div class="text-xs text-[#D4AF37] font-medium">25 <span data-en="credits" data-ar="Ø±ØµÙŠØ¯">Ø±ØµÙŠØ¯</span></div>
                    </div>
                </button>
                
                <!-- Enterprise Plan -->
                <button onclick="showEnterpriseContact()" class="credit-package w-full p-4 rounded-xl border border-[#D4AF37] bg-[#FDFBF7] transition-all flex justify-between items-center hover:shadow-md">
                    <div class="text-left">
                        <div class="font-semibold text-sm text-[#2C3E50]">
                            <span data-en="ğŸ¢ Enterprise" data-ar="ğŸ¢ Ù„Ù„Ø´Ø±ÙƒØ§Øª">ğŸ¢ Ù„Ù„Ø´Ø±ÙƒØ§Øª</span>
                        </div>
                        <div class="text-xs text-[#5D6D7E]">
                            <span data-en="For businesses & organizations" data-ar="Ù„Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø§Øª">Ù„Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø§Øª</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-[#D4AF37] text-sm">
                            <span data-en="Contact us" data-ar="ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</span>
                        </div>
                        <div class="text-xs text-[#95A5A6]">
                            <span data-en="Custom pricing" data-ar="Ø£Ø³Ø¹Ø§Ø± Ø®Ø§ØµØ©">Ø£Ø³Ø¹Ø§Ø± Ø®Ø§ØµØ©</span>
                        </div>
                    </div>
                </button>
            </div>
            
            <!-- Safety Information -->
            <div class="text-center text-xs text-[#5D6D7E] mb-3 p-2 bg-[#F8F5F0] rounded-lg border border-[#E8E4DE]">
                <span data-en="ğŸ’¡ Safe & Easy - Credits added within 24 hours" data-ar="ğŸ’¡ Ø¢Ù…Ù† ÙˆØ³Ù‡Ù„ - ÙŠØ¶Ø§Ù Ø§Ù„Ø±ØµÙŠØ¯ Ø®Ù„Ø§Ù„ Ù¢Ù¤ Ø³Ø§Ø¹Ø©">ğŸ’¡ Ø¢Ù…Ù† ÙˆØ³Ù‡Ù„ - ÙŠØ¶Ø§Ù Ø§Ù„Ø±ØµÙŠØ¯ Ø®Ù„Ø§Ù„ Ù¢Ù¤ Ø³Ø§Ø¹Ø©</span>
            </div>
            
                    <div class="flex gap-2">
                        <button onclick="closeCreditModal()" class="flex-1 py-2 text-gray-600 hover:text-gray-800 transition-colors text-sm">
                            <span data-en="Maybe Later" data-ar="Ø±Ø¨Ù…Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹">Ø±Ø¨Ù…Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹</span>
                        </button>
                        <button onclick="closeCreditModal()" class="text-gray-400 hover:text-gray-600 transition-colors p-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Page 2: Simple Payment Instructions -->
                <div id="page2" class="w-full absolute top-0 left-full px-4 sm:px-6 flex flex-col items-center">
                    <div class="w-full max-w-md">
                    <!-- Selected Package Badge -->
                    <div class="text-center mb-4">
                        <div class="inline-block px-5 py-2 bg-gradient-to-r from-[#2C3E50] to-[#3d566e] text-white rounded-full shadow-md">
                            <span class="text-lg font-bold" id="selectedPrice">2 Ø±ÛŒØ§Ù„</span>
                            <span class="mx-2 opacity-70">â†’</span>
                            <span class="text-lg" id="selectedCredits">25 <span data-en="credits" data-ar="Ø±ØµÙŠØ¯">Ø±ØµÙŠØ¯</span></span>
                        </div>
                    </div>

                    <!-- Simple Explanation -->
                    <div class="text-center mb-5 px-2">
                        <p class="text-gray-600 text-sm leading-relaxed">
                            <span data-en="Simple & safe phone transfer. Credits usually added within minutes!" data-ar="ØªØ­ÙˆÙŠÙ„ Ø¢Ù…Ù† ÙˆØ¨Ø³ÙŠØ· Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ. ÙŠØ¶Ø§Ù Ø±ØµÙŠØ¯Ùƒ Ø¨Ø³Ø±Ø¹Ø©ØŒ Ø¹Ø§Ø¯Ø©Ù‹ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚.">ØªØ­ÙˆÙŠÙ„ Ø¢Ù…Ù† ÙˆØ¨Ø³ÙŠØ· Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ. ÙŠØ¶Ø§Ù Ø±ØµÙŠØ¯Ùƒ Ø¨Ø³Ø±Ø¹Ø©ØŒ Ø¹Ø§Ø¯Ø©Ù‹ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚.</span>
                        </p>
                    </div>

                    <!-- Phone Number - Big & Clear -->
                    <button onclick="copyBankNumber(event)" class="w-full mb-4 p-5 bg-gradient-to-br from-[#FDF8F3] to-[#F5E6D3] border-2 border-[#D4AF37] rounded-2xl hover:shadow-lg transition-all">
                        <div class="text-xs text-[#8B4513] mb-1 font-medium">
                            <span data-en="Transfer to:" data-ar="Ø­ÙˆÙ‘Ù„ Ø¥Ù„Ù‰:">Ø­ÙˆÙ‘Ù„ Ø¥Ù„Ù‰:</span>
                        </div>
                        <div class="flex items-center justify-center gap-2 mb-1">
                            <svg class="w-6 h-6 text-[#D4AF37]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                            <div class="text-3xl font-bold text-[#2C3E50]" dir="ltr"><span class="text-lg text-[#8B4513]">+968</span> 77310987</div>
                        </div>
                        <div class="text-xs text-[#8B4513] flex items-center justify-center gap-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                            <span data-en="Tap to copy" data-ar="Ø§Ø¶ØºØ· Ù„Ù„Ù†Ø³Ø®">Ø§Ø¶ØºØ· Ù„Ù„Ù†Ø³Ø®</span>
                        </div>
                    </button>

                    <!-- Your ID - Compact -->
                    <div class="mb-5 p-3 bg-gray-50 rounded-xl border border-gray-200 flex items-center justify-between gap-3">
                        <div class="flex-1 min-w-0">
                            <div class="text-xs text-gray-500 mb-1">
                                <span data-en="Your ID:" data-ar="Ù…Ø¹Ø±Ù‘ÙÙƒ:">Ù…Ø¹Ø±Ù‘ÙÙƒ:</span>
                            </div>
                            <code id="userIdDisplay" class="block text-xs font-mono text-gray-700 truncate">Loading...</code>
                        </div>
                        <button onclick="copyUserId(event)" class="shrink-0 px-3 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-xs rounded-lg transition-colors">
                            <span data-en="Copy" data-ar="Ù†Ø³Ø®">Ù†Ø³Ø®</span>
                        </button>
                    </div>

                    <!-- Main Action: WhatsApp -->
                    <button onclick="openWhatsAppForPurchase()" class="w-full mb-3 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center justify-center gap-2 text-lg">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                        </svg>
                        <span data-en="Send on WhatsApp" data-ar="Ø£Ø±Ø³Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨">Ø£Ø±Ø³Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</span>
                    </button>

                    <!-- Request Call - Nicer Design -->
                    <button onclick="showCallbackForm()" id="callbackToggle" class="w-full mb-4 py-3 bg-[#F8F5F0] border border-[#E8E4DE] text-[#2C3E50] font-medium rounded-xl hover:bg-[#F0EDE8] transition-all flex items-center justify-center gap-2">
                        <svg class="w-5 h-5 text-[#2C3E50]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                        <span data-en="We'll call you instead?" data-ar="Ù†ØªØµÙ„ Ø¨Ùƒ Ø§Ø­Ù†Ø§ØŸ">Ù†ØªØµÙ„ Ø¨Ùƒ Ø§Ø­Ù†Ø§ØŸ</span>
                    </button>
                    
                    <!-- Callback Form (Hidden by default) -->
                    <div id="callbackFormContainer" class="hidden mb-4 p-4 bg-[#F8F5F0] rounded-xl border border-[#E8E4DE] space-y-3">
                        <input type="tel" id="callbackContact" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ" class="w-full px-4 py-3 border border-[#E8E4DE] rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#2C3E50] bg-white">
                        <textarea id="callbackNotes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" rows="2" class="w-full px-4 py-3 border border-[#E8E4DE] rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#2C3E50] bg-white resize-none"></textarea>
                        <button onclick="submitCallbackRequest()" class="w-full py-3 bg-[#2C3E50] hover:bg-[#1a252f] text-white font-bold rounded-xl transition-all shadow-md flex items-center justify-center gap-2">
                            <span data-en="Call me!" data-ar="Ø§ØªØµÙ„ÙˆØ§ Ø¨ÙŠ!">Ø§ØªØµÙ„ÙˆØ§ Ø¨ÙŠ!</span>
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Back Button -->
                    <button onclick="goBackToPackages()" class="w-full py-2 text-gray-400 hover:text-gray-600 transition-colors text-sm">
                        <span data-en="â† Back" data-ar="â† Ø±Ø¬ÙˆØ¹">â† Ø±Ø¬ÙˆØ¹</span>
                    </button>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- Exit-Intent Discount Popup -->
    <div id="exitDiscountModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl max-w-md w-full shadow-2xl transform transition-all p-6">
            <div class="text-center mb-4">
                <div class="text-4xl mb-2">ğŸ¥º</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">
                    <span data-en="Wait, wait... before you go!" data-ar="Ù„Ø­Ø¸Ø© Ù„Ø­Ø¸Ø©.. Ù‚Ø¨Ù„ Ù„Ø§ ØªØ±ÙˆØ­!">Ù„Ø­Ø¸Ø© Ù„Ø­Ø¸Ø©.. Ù‚Ø¨Ù„ Ù„Ø§ ØªØ±ÙˆØ­!</span>
                </h3>
                <p class="text-lg text-[#D4AF37] font-bold">
                    <span data-en="Special 50% discount just for you!" data-ar="Ø®ØµÙ… Ø®Ø§Øµ Ù„Ùƒ â€” 50Ùª Ø¹Ù„Ù‰ Ø£ÙŠ Ø¨Ø§Ù‚Ø©!">Ø®ØµÙ… Ø®Ø§Øµ Ù„Ùƒ â€” 50Ùª Ø¹Ù„Ù‰ Ø£ÙŠ Ø¨Ø§Ù‚Ø©!</span>
                </p>
            </div>

            <!-- Discounted Packages -->
            <div class="space-y-2 mb-4">
                <!-- Starter - 50 Baisa -->
                <button onclick="buyCreditsWithDiscount(1, 0.05)" class="w-full p-3 rounded-lg border-2 border-[#E8E4DE] bg-[#FDF8F3] hover:bg-[#F5E6D3] transition-all flex justify-between items-center relative">
                    <div class="absolute -top-2 -left-2 bg-[#8B4513] text-white text-xs px-2 py-1 rounded-full">50% OFF</div>
                    <div class="text-left">
                        <div class="font-semibold text-sm line-through text-gray-400">
                            <span>100 Ø¨ÙŠØ³Ø©</span>
                        </div>
                        <div class="font-bold text-lg text-[#2C3E50]">
                            <span data-en="50 Baisa" data-ar="50 Ø¨ÙŠØ³Ø©">50 Ø¨ÙŠØ³Ø©</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-gray-600">1 <span data-en="credit" data-ar="Ø±ØµÙŠØ¯">Ø±ØµÙŠØ¯</span></div>
                    </div>
                </button>

                <!-- Basic - 500 Baisa -->
                <button onclick="buyCreditsWithDiscount(10, 0.5)" class="w-full p-3 rounded-lg border-2 border-[#E8E4DE] bg-[#FDF8F3] hover:bg-[#F5E6D3] transition-all flex justify-between items-center relative">
                    <div class="absolute -top-2 -left-2 bg-[#8B4513] text-white text-xs px-2 py-1 rounded-full">50% OFF</div>
                    <div class="text-left">
                        <div class="font-semibold text-sm line-through text-gray-400">1 <span>Ø±ÙŠØ§Ù„</span></div>
                        <div class="font-bold text-lg text-[#2C3E50]">
                            <span data-en="500 Baisa" data-ar="500 Ø¨ÙŠØ³Ø©">500 Ø¨ÙŠØ³Ø©</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-gray-600">10 <span data-en="credits" data-ar="Ø£Ø±ØµØ¯Ø©">Ø£Ø±ØµØ¯Ø©</span></div>
                    </div>
                </button>

                <!-- Pro - 1 OMR -->
                <button onclick="buyCreditsWithDiscount(25, 1)" class="w-full p-3 rounded-lg border-2 border-[#D4AF37] bg-gradient-to-r from-[#FDF8F3] to-[#FDFBF7] hover:from-[#F5E6D3] hover:to-[#FDF8F3] transition-all flex justify-between items-center relative">
                    <div class="absolute -top-2 -left-2 bg-[#8B4513] text-white text-xs px-2 py-1 rounded-full">50% OFF</div>
                    <div class="text-left">
                        <div class="font-semibold text-sm line-through text-gray-400">2 <span>Ø±ÙŠØ§Ù„</span></div>
                        <div class="font-bold text-lg text-[#D4AF37]">
                            1 <span data-en="OMR" data-ar="Ø±ÙŠØ§Ù„">Ø±ÙŠØ§Ù„</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-[#D4AF37] font-bold">25 <span data-en="credits" data-ar="Ø±ØµÙŠØ¯">Ø±ØµÙŠØ¯</span></div>
                    </div>
                </button>
            </div>

            <button onclick="acceptDiscount()" class="w-full py-3 bg-gradient-to-r from-[#2C3E50] to-[#8B4513] text-white font-bold rounded-xl hover:from-[#1a252f] hover:to-[#6d3410] transition-all transform hover:scale-105 shadow-lg mb-3">
                <span data-en="Claim My Discount!" data-ar="Ø§Ø³ØªÙÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ø±Ø¶!">Ø§Ø³ØªÙÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ø±Ø¶!</span>
            </button>

            <button onclick="closeExitDiscount()" class="w-full py-2 text-gray-500 hover:text-gray-700 transition-colors text-sm">
                <span data-en="No thanks, I'll pay full price" data-ar="Ù„Ø§ Ø´ÙƒØ±Ø§Ù‹ØŒ Ø³Ø£Ø¯ÙØ¹ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙƒØ§Ù…Ù„">Ù„Ø§ Ø´ÙƒØ±Ø§Ù‹ØŒ Ø³Ø£Ø¯ÙØ¹ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙƒØ§Ù…Ù„</span>
            </button>
        </div>
    </div>

    <!-- Enterprise Contact Modal -->
    <div id="enterpriseModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl transform transition-all scale-95 p-6 md:p-8 relative">
            <!-- Close Button -->
            <button onclick="closeEnterpriseModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>

            <!-- Header -->
            <div class="text-center mb-4">
                <div class="text-4xl mb-2">ğŸ¢</div>
                <h2 class="text-2xl font-bold text-gray-800 mb-1">
                    <span data-en="Enterprise Solutions" data-ar="Ø­Ù„ÙˆÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª">Ø­Ù„ÙˆÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª</span>
                </h2>
                <p class="text-sm text-gray-600">
                    <span data-en="Custom AI solutions for your business" data-ar="Ø­Ù„ÙˆÙ„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ø®ØµØµØ© Ù„Ø¹Ù…Ù„Ùƒ">Ø­Ù„ÙˆÙ„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ø®ØµØµØ© Ù„Ø¹Ù…Ù„Ùƒ</span>
                </p>
            </div>

            <!-- Services Offered -->
            <div class="mb-4 space-y-2">
                <div class="p-3 bg-[#F8F5F0] rounded-lg border border-[#E8E4DE]">
                    <div class="flex items-start gap-2">
                        <div class="text-xl">ğŸ¨</div>
                        <div>
                            <h3 class="font-semibold text-sm text-gray-800">
                                <span data-en="White Labeling" data-ar="Ø¹Ù„Ø§Ù…ØªÙƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ø§Ù„Ø®Ø§ØµØ©">Ø¹Ù„Ø§Ù…ØªÙƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ø§Ù„Ø®Ø§ØµØ©</span>
                            </h3>
                            <p class="text-xs text-gray-600">
                                <span data-en="Custom branding" data-ar="Ø®ØµØµ Ø¨Ø¹Ù„Ø§Ù…ØªÙƒ">Ø®ØµØµ Ø¨Ø¹Ù„Ø§Ù…ØªÙƒ</span>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="p-3 bg-[#F8F5F0] rounded-lg border border-[#E8E4DE]">
                    <div class="flex items-start gap-2">
                        <div class="text-xl">âš™ï¸</div>
                        <div>
                            <h3 class="font-semibold text-sm text-[#2C3E50]">
                                <span data-en="Custom Features" data-ar="Ù…Ù…ÙŠØ²Ø§Øª Ù…Ø®ØµØµØ©">Ù…Ù…ÙŠØ²Ø§Øª Ù…Ø®ØµØµØ©</span>
                            </h3>
                            <p class="text-xs text-[#5D6D7E]">
                                <span data-en="Tailored to your needs" data-ar="Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ">Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ</span>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="p-3 bg-[#FDF8F3] rounded-lg border border-[#E8E4DE]">
                    <div class="flex items-start gap-2">
                        <div class="text-xl">ğŸ¯</div>
                        <div>
                            <h3 class="font-semibold text-sm text-gray-800">
                                <span data-en="Dedicated Support" data-ar="Ø¯Ø¹Ù… Ù…Ø®ØµØµ">Ø¯Ø¹Ù… Ù…Ø®ØµØµ</span>
                            </h3>
                            <p class="text-xs text-gray-600">
                                <span data-en="Priority support" data-ar="Ø¯Ø¹Ù… Ø°Ùˆ Ø£ÙˆÙ„ÙˆÙŠØ©">Ø¯Ø¹Ù… Ø°Ùˆ Ø£ÙˆÙ„ÙˆÙŠØ©</span>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="p-3 bg-[#FDF8F3] rounded-lg border border-[#E8E4DE]">
                    <div class="flex items-start gap-2">
                        <div class="text-xl">ğŸ’°</div>
                        <div>
                            <h3 class="font-semibold text-sm text-gray-800">
                                <span data-en="Bulk Pricing" data-ar="Ø£Ø³Ø¹Ø§Ø± Ù„Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©">Ø£Ø³Ø¹Ø§Ø± Ù„Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©</span>
                            </h3>
                            <p class="text-xs text-gray-600">
                                <span data-en="Special rates" data-ar="Ø£Ø³Ø¹Ø§Ø± Ø®Ø§ØµØ©">Ø£Ø³Ø¹Ø§Ø± Ø®Ø§ØµØ©</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="mb-4 p-3 bg-[#F8F5F0] rounded-lg border border-[#E8E4DE]">
                <h3 class="font-semibold text-[#2C3E50] mb-2 text-center text-sm">
                    <span data-en="Contact Us" data-ar="ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</span>
                </h3>
                
                <div class="space-y-1.5 text-xs">
                    <a href="tel:96877310987" class="flex items-center gap-2 p-1.5 hover:bg-white/50 rounded transition-colors">
                        <svg class="w-4 h-4 text-[#2C3E50]" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 10.999h2C22 5.869 18.127 2 12.99 2v2C17.052 4 20 6.943 20 10.999z"/>
                            <path d="M13 8c2.103 0 3 .897 3 3h2c0-3.225-1.775-5-5-5v2zm3.422 5.443a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.086-1.391l-4.064-3.696z"/>
                        </svg>
                        <div class="font-semibold text-gray-800">77310987</div>
                    </a>

                    <a href="mailto:haiba.auth@gmail.com" class="flex items-center gap-2 p-1.5 hover:bg-white/50 rounded transition-colors">
                        <svg class="w-4 h-4 text-[#2C3E50]" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm0 2v.511l-8 6.223-8-6.222V6h16zM4 18V9.044l7.386 5.745a.994.994 0 0 0 1.228 0L20 9.044 20.002 18H4z"/>
                        </svg>
                        <div class="font-semibold text-gray-800 break-all">haiba.auth@gmail.com</div>
                    </a>

                    <div class="flex items-center gap-2 p-1.5">
                        <svg class="w-4 h-4 text-[#2C3E50]" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477zM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0zM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605zM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477zM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098zM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816zM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49zM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276zM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985z"/>
                        </svg>
                        <div class="font-semibold text-gray-800">www.haiba.store</div>
                    </div>

                    <div class="flex items-center gap-2 p-1.5">
                        <svg class="w-4 h-4 text-[#2C3E50]" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19.965 8.521C19.988 8.347 20 8.173 20 8c0-2.379-2.143-4.288-4.521-3.965C14.786 2.802 13.466 2 12 2s-2.786.802-3.479 2.035C6.138 3.712 4 5.621 4 8c0 .173.012.347.035.521C2.802 9.215 2 10.535 2 12s.802 2.785 2.035 3.479A3.976 3.976 0 0 0 4 16c0 2.379 2.138 4.283 4.521 3.965C9.214 21.198 10.534 22 12 22s2.786-.802 3.479-2.035C17.857 20.283 20 18.379 20 16c0-.173-.012-.347-.035-.521C21.198 14.785 22 13.465 22 12s-.802-2.785-2.035-3.479z"/>
                        </svg>
                        <div class="font-semibold text-gray-800">CR: 1622252</div>
                    </div>
                </div>
            </div>

            <!-- WhatsApp Button -->
            <button onclick="contactViaWhatsApp()" class="w-full py-3 bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center justify-center gap-2 text-sm mb-3">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                </svg>
                <span data-en="Message us on WhatsApp" data-ar="Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨">Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</span>
            </button>

            <!-- View Pricing Plans Link -->
            <a href="/enterprise.html" class="w-full py-2.5 border border-[#2C3E50] text-[#2C3E50] font-semibold rounded-xl hover:bg-[#2C3E50] hover:text-white transition-all flex items-center justify-center gap-2 text-sm">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                </svg>
                <span data-en="View Business Plans & Pricing" data-ar="Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±">Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±</span>
            </a>
        </div>
    </div>

    <script>
        // Global Contact Information
        const CONTACT_INFO = {
            phone: '77310987',
            phoneWithCountry: '96877310987',
            email: 'haiba.auth@gmail.com',
            bankAccount: '77310987'
        };

        // Enhanced OmaniAI class with new features
        class OmaniAI {
            constructor() {
                this.currentLanguage = 'ar';
                this.isAuthenticated = false;
                this.userCredits = 0;
                this.clerk = null;
                this.currentUser = null;
                this.init();
            }

            async init() {
                const startTime = performance.now();
                console.log('ğŸš€ Initializing Modern Omani AI Generator...');
                
                // Create browser session ID for non-authenticated users
                this.createBrowserSession();
                console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Browser session created`);
                
                // Restore saved prompt from localStorage if exists
                this.restoreSavedPrompt();
                console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Prompt restored`);
                
                // Load sample images FIRST (non-blocking, fast)
                this.loadRandomSampleImages();
                console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Sample images loaded`);
                
                // Setup event listeners (fast)
                this.setupEventListeners();
                console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Event listeners setup`);
                
                // Update language (fast)
                this.updateLanguage();
                console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Language updated`);
                
                // Initialize Clerk LAST (slowest, async)
                await this.initializeClerk();
                console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Clerk initialized`);
                
                console.log(`âœ… Modern app initialized successfully in ${(performance.now() - startTime).toFixed(0)}ms`);
            }

            restoreSavedPrompt() {
                try {
                    const savedPrompt = localStorage.getItem('heiba-pending-prompt');
                    console.log('ğŸ” Checking for saved prompt:', savedPrompt);
                    
                    if (savedPrompt) {
                        const textarea = document.getElementById('description');
                        console.log('ğŸ“ Textarea element:', textarea);
                        
                        if (textarea) {
                            textarea.value = savedPrompt;
                            console.log('âœ… Restored saved prompt:', savedPrompt);
                            
                            // Show user feedback
                            this.showMessage(
                                this.currentLanguage === 'ar' 
                                    ? 'âœ… ØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Øµ Ø§Ù„Ø°ÙŠ ÙƒØªØ¨ØªÙ‡' 
                                    : 'âœ… Your text has been restored',
                                'success'
                            );
                        } else {
                            console.warn('âš ï¸ Textarea not found!');
                        }
                        
                        // Clear it from storage after restoring
                        localStorage.removeItem('heiba-pending-prompt');
                        console.log('ğŸ—‘ï¸ Cleared saved prompt from storage');
                    } else {
                        console.log('â„¹ï¸ No saved prompt found');
                    }
                } catch (error) {
                    console.error('âŒ Error restoring prompt:', error);
                }
            }

            savePromptToStorage() {
                try {
                    const textarea = document.getElementById('description');
                    const prompt = textarea?.value?.trim();
                    
                    console.log('ğŸ’¾ Attempting to save prompt...');
                    console.log('ğŸ“ Textarea element:', textarea);
                    console.log('ğŸ“„ Prompt value:', prompt);
                    
                    if (prompt) {
                        localStorage.setItem('heiba-pending-prompt', prompt);
                        console.log('âœ… Saved prompt to localStorage:', prompt);
                        console.log('ğŸ” Verification - stored value:', localStorage.getItem('heiba-pending-prompt'));
                        
                        // Show user feedback
                        this.showMessage(
                            this.currentLanguage === 'ar' 
                                ? 'ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†Øµ Ù…Ø¤Ù‚ØªØ§Ù‹' 
                                : 'ğŸ’¾ Text saved temporarily',
                            'info'
                        );
                    } else {
                        console.log('âš ï¸ No prompt to save (empty or whitespace)');
                    }
                } catch (error) {
                    console.error('âŒ Error saving prompt:', error);
                }
            }

            loadRandomSampleImages() {
                // All available sample images with descriptions
                const sampleImages = [
                    {
                        src: 'black.webp',
                        descAr: 'Ø±Ø¬Ù„ ÙŠØ¨ØªØ³Ù… Ø¨Ù„Ø¨Ø§Ø³ Ø¹Ù…Ø§Ù†ÙŠ Ø¯Ø§ÙƒÙ†',
                        descEn: 'Smiling man in dark Omani attire'
                    },
                    {
                        src: 'child bisht musar dishdasha.webp',
                        descAr: 'Ø·ÙÙ„ Ù„Ø§Ø¨Ø³ Ø¯Ø´Ø¯Ø§Ø´Ø© ÙˆÙ…ØµØ±',
                        descEn: 'Child in dishdasha and musar'
                    },
                    {
                        src: 'man quran.webp',
                        descAr: 'Ø±Ø¬Ù„ ÙŠÙ‚Ø±Ø£ Ø§Ù„Ù‚Ø±Ø¢Ù†',
                        descEn: 'Man reading Quran'
                    },
                    {
                        src: 'man wadi palm.webp',
                        descAr: 'Ø±Ø¬Ù„ ÙÙŠ ÙˆØ§Ø¯Ù ÙˆÙ†Ø®ÙŠÙ„',
                        descEn: 'Man in wadi with palms'
                    },
                    {
                        src: 'musar and blue dishdasha.webp',
                        descAr: 'Ø±Ø¬Ù„ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø²Ø±Ù‚Ø§Ø¡ ÙˆÙ…ØµØ±',
                        descEn: 'Man in blue dishdasha and musar'
                    },
                    {
                        src: 'night man moon.webp',
                        descAr: 'Ø±Ø¬Ù„ ÙŠØªØ£Ù…Ù„ ØªØ­Øª Ø§Ù„Ù‚Ù…Ø±',
                        descEn: 'Man gazing under the moon'
                    },
                    {
                        src: 'old in office 2.webp',
                        descAr: 'Ø±Ø¬Ù„ Ù…Ø³Ù† ÙÙŠ Ù…ÙƒØªØ¨Ø©',
                        descEn: 'Elder man in library'
                    },
                    {
                        src: 'qahwa3.webp',
                        descAr: 'Ø±Ø¬Ù„ ÙŠØªÙ‚Ù‡ÙˆÙ‰',
                        descEn: 'Man enjoying qahwa'
                    },
                    {
                        src: 'Ø±Ø¬Ù„ Ù„Ø§Ø¨Ø³ Ù…ØµØ± ÙˆØ¨Ø´Øª.webp',
                        descAr: 'Ø±Ø¬Ù„ ÙŠØ±ØªØ¯ÙŠ Ø§Ù„Ø¨Ø´Øª ÙˆØ§Ù„Ù…ØµØ±',
                        descEn: 'Man wearing bisht and musar'
                    }
                ];

                // Shuffle array and pick 4 random images
                const shuffled = [...sampleImages].sort(() => Math.random() - 0.5);
                const selected = shuffled.slice(0, 4);

                // Get the grid container
                const grid = document.getElementById('sampleImagesGrid');
                if (!grid) return;

                // Clear existing content
                grid.innerHTML = '';

                // Add selected images to grid
                selected.forEach(img => {
                    const div = document.createElement('div');
                    div.className = 'card-hover';
                    div.innerHTML = `
                        <img src="${img.src}" alt="${img.descAr}" class="sample-image w-full">
                        <p class="text-center mt-2 text-sm text-gray-600" data-en="${img.descEn}" data-ar="${img.descAr}">${img.descAr}</p>
                    `;
                    grid.appendChild(div);
                });

                // Update language for new elements
                this.updateLanguage();
            }

            createBrowserSession() {
                // Create a persistent browser session ID
                if (!localStorage.getItem('heiba-session-id')) {
                    const sessionId = 'session-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('heiba-session-id', sessionId);
                    localStorage.setItem('heiba-session-created', new Date().toISOString());
                }
                
                // Store basic session info
                window.heibaSession = {
                    id: localStorage.getItem('heiba-session-id'),
                    created: localStorage.getItem('heiba-session-created'),
                    userAgent: navigator.userAgent.substr(0, 50), // First 50 chars
                    timestamp: Date.now()
                };
                
                console.log('Browser session created:', window.heibaSession.id);
            }

            async initializeClerk() {
                const startTime = performance.now();
                try {
                    console.log(`â±ï¸ Clerk: Waiting for window.Clerk...`);
                    let waitCount = 0;
                    while (!window.Clerk) {
                        await new Promise(resolve => setTimeout(resolve, 100));
                        waitCount++;
                        if (waitCount % 10 === 0) {
                            console.log(`â±ï¸ Clerk: Still waiting... ${waitCount * 100}ms`);
                        }
                        if (waitCount > 100) {
                            console.error('âŒ Clerk failed to load after 10 seconds');
                            return;
                        }
                    }
                    console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] window.Clerk available`);
                    
                    this.clerk = window.Clerk;
                    await this.clerk.load();
                    console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] clerk.load() completed`);
                    
                    const session = this.clerk.session;
                    this.isAuthenticated = !!session;
                    console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Session check: ${this.isAuthenticated}`);
                    
                    // Update UI immediately BEFORE loading credits
                    this.updateAuthUI(this.isAuthenticated);
                    console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Auth UI updated`);
                    
                    // Show loading state for credits
                    this.showCreditsLoading();
                    
                    // Store user info globally for easier access
                    if (this.isAuthenticated && this.clerk.user) {
                        this.currentUser = this.clerk.user;
                        window.heibaUser = {
                            id: this.clerk.user.id || this.clerk.user.externalId,
                            email: this.clerk.user.primaryEmailAddress?.emailAddress || 
                                   this.clerk.user.emailAddresses?.[0]?.emailAddress,
                            name: this.clerk.user.fullName || this.clerk.user.firstName
                        };
                        console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] User info stored:`, window.heibaUser);
                        
                        // Load credits and history in parallel (non-blocking for UI)
                        Promise.all([
                            this.loadUserCredits(),
                            this.loadUserHistory()
                        ]).then(() => {
                            console.log(`â±ï¸ [${(performance.now() - startTime).toFixed(0)}ms] Credits & history loaded`);
                        });
                    }
                    
                    this.clerk.addListener(async ({ session }) => {
                        const wasAuthenticated = this.isAuthenticated;
                        this.isAuthenticated = !!session;
                        
                        // Update global user info
                        if (this.isAuthenticated && this.clerk.user) {
                            this.currentUser = this.clerk.user;
                            window.heibaUser = {
                                id: this.clerk.user.id || this.clerk.user.externalId,
                                email: this.clerk.user.primaryEmailAddress?.emailAddress || 
                                       this.clerk.user.emailAddresses?.[0]?.emailAddress,
                                name: this.clerk.user.fullName || this.clerk.user.firstName
                            };
                            console.log('User updated:', window.heibaUser);
                        } else {
                            this.currentUser = null;
                            window.heibaUser = null;
                        }
                        
                        if (this.isAuthenticated !== wasAuthenticated) {
                            this.updateAuthUI(this.isAuthenticated);
                            if (this.isAuthenticated) {
                                this.showCreditsLoading();
                                await this.loadUserCredits();
                                await this.loadUserHistory();
                                // Restore saved prompt if exists (in case auth completes without page reload)
                                this.restoreSavedPrompt();
                            } else {
                                this.userCredits = 0;
                                this.updateCreditsDisplay();
                            }
                        }
                    });
                    
                } catch (error) {
                    console.error('Failed to initialize Clerk:', error);
                    this.userCredits = 0;
                    this.updateCreditsDisplay();
                }
            }

            setupEventListeners() {
                // Language toggle
                document.getElementById('languageToggle')?.addEventListener('click', () => {
                    this.toggleLanguage();
                });

                // Auth button
                document.getElementById('authButton')?.addEventListener('click', () => {
                    this.handleAuth();
                });

                // Generate button
                document.getElementById('generateButton')?.addEventListener('click', () => {
                    this.handleGenerate();
                });

                // View samples scroll
                document.getElementById('viewSamplesButton')?.addEventListener('click', () => {
                    document.getElementById('samplesSection').scrollIntoView({ behavior: 'smooth' });
                });

                // History button
                document.getElementById('historyButton')?.addEventListener('click', () => {
                    this.openHistoryModal();
                });

                // Close history modal
                document.getElementById('closeHistoryModal')?.addEventListener('click', () => {
                    this.closeHistoryModal();
                });

                // Hide refined prompt
                document.getElementById('hideRefinedPrompt')?.addEventListener('click', () => {
                    this.hideRefinedPrompt();
                });

                // Download image
                document.getElementById('downloadImage')?.addEventListener('click', () => {
                    this.downloadImage();
                });
            }

            toggleLanguage() {
                this.currentLanguage = this.currentLanguage === 'en' ? 'ar' : 'en';
                this.updateLanguage();
            }

            updateLanguage() {
                const html = document.documentElement;
                const languageText = document.getElementById('languageText');
                const description = document.getElementById('description');

                if (this.currentLanguage === 'ar') {
                    html.setAttribute('dir', 'rtl');
                    html.setAttribute('lang', 'ar');
                    html.classList.add('font-arabic');
                    html.classList.remove('font-english');
                    if (languageText) languageText.textContent = 'En';
                    
                    if (description) {
                        description.placeholder = description.getAttribute('data-placeholder-ar');
                    }
                } else {
                    html.setAttribute('dir', 'ltr');
                    html.setAttribute('lang', 'en');
                    html.classList.add('font-english');
                    html.classList.remove('font-arabic');
                    if (languageText) languageText.textContent = 'Ø¹Ø±Ø¨ÙŠ';
                    
                    if (description) {
                        description.placeholder = description.getAttribute('data-placeholder-en');
                    }
                }

                document.querySelectorAll('[data-en][data-ar]').forEach(element => {
                    const text = this.currentLanguage === 'ar' 
                        ? element.getAttribute('data-ar')
                        : element.getAttribute('data-en');
                    element.textContent = text;
                });

                // Update developer modal language
                const modal = document.getElementById('developerModal');
                if (modal && !modal.classList.contains('hidden')) {
                    const arabicContent = modal.querySelector('.ar-content');
                    const englishContent = modal.querySelector('.en-content');
                    
                    if (this.currentLanguage === 'ar') {
                        arabicContent.classList.remove('hidden');
                        englishContent.classList.add('hidden');
                    } else {
                        arabicContent.classList.add('hidden');
                        englishContent.classList.remove('hidden');
                    }
                }

                console.log(`ğŸŒ Language updated to: ${this.currentLanguage}`);
            }

            // Authentication methods
            handleAuth() {
                if (this.isAuthenticated) {
                    this.signOut();
                } else {
                    // Save prompt before signing in
                    this.savePromptToStorage();
                    this.signIn();
                }
            }

            async signIn() {
                try {
                    if (this.clerk) {
                        await this.clerk.openSignIn();
                    }
                } catch (error) {
                    console.error('Sign in failed:', error);
                    this.showMessage('Sign in failed', 'error');
                }
            }

            async signOut() {
                try {
                    if (this.clerk) {
                        await this.clerk.signOut();
                        this.showMessage(
                            this.currentLanguage === 'ar' ? 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­' : 'Signed out successfully', 
                            'success'
                        );
                    }
                } catch (error) {
                    console.error('Sign out failed:', error);
                    this.showMessage(
                        this.currentLanguage === 'ar' ? 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬' : 'Sign out failed', 
                        'error'
                    );
                }
            }

            updateAuthUI(authenticated) {
                const authButton = document.getElementById('authButton');
                const creditsDisplay = document.getElementById('creditsDisplay');
                const freeTrialBanner = document.getElementById('freeTrialBanner');

                if (authenticated) {
                    authButton.innerHTML = this.currentLanguage === 'ar' 
                        ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬' 
                        : 'Sign Out';
                    creditsDisplay?.classList.remove('hidden');
                    // Add subtle attention animation to credits button
                    creditsDisplay?.classList.add('credits-attention');
                    freeTrialBanner?.classList.add('hidden');
                } else {
                    authButton.innerHTML = this.currentLanguage === 'ar' 
                        ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' 
                        : 'Sign In';
                    creditsDisplay?.classList.add('hidden');
                    freeTrialBanner?.classList.remove('hidden');
                }
            }

            // Show loading state for credits
            showCreditsLoading() {
                const creditsCount = document.getElementById('creditsCount');
                const creditsDisplay = document.getElementById('creditsDisplay');
                if (creditsCount && creditsDisplay) {
                    creditsCount.textContent = '...';
                    creditsDisplay.style.opacity = '0.6';
                }
            }

            // Credits management
            async loadUserCredits() {
                if (!this.currentUser?.id && !window.heibaUser?.id) {
                    console.log('No user ID available for credit fetch');
                    this.userCredits = 0;
                    this.updateCreditsDisplay();
                    return;
                }

                try {
                    const response = await fetch('/api/credits', {
                        headers: {
                            'Authorization': `Bearer ${await this.clerk?.session?.getToken()}`,
                        }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        this.userCredits = data.credits || 0;
                        console.log('Credits loaded successfully:', this.userCredits);
                    } else {
                        console.error('Failed to fetch credits:', response.status);
                        this.userCredits = 0;
                    }
                } catch (error) {
                    console.error('Error fetching credits:', error);
                    this.userCredits = 0;
                }
                
                // Always update display after fetch (success or failure)
                this.updateCreditsDisplay();
            }

            updateCreditsDisplay() {
                const creditsCount = document.getElementById('creditsCount');
                const creditsLabel = document.getElementById('creditsLabel');
                const creditsCartIcon = document.getElementById('creditsCartIcon');
                const creditsDisplay = document.getElementById('creditsDisplay');
                
                if (creditsCount && creditsDisplay) {
                    creditsDisplay.style.opacity = '1'; // Remove loading opacity
                    
                    // Show "Buy Credits" when 0, otherwise show count
                    if (this.userCredits === 0) {
                        const isArabic = document.documentElement.dir === 'rtl';
                        creditsLabel.style.display = 'none';
                        creditsCount.innerHTML = `<span class="text-[#D4AF37] font-bold">${isArabic ? 'Ø§Ø´ØªØ±ÙŠ Ø±ØµÙŠØ¯' : 'Buy Credits'}</span>`;
                        if (creditsCartIcon) creditsCartIcon.classList.remove('hidden');
                    } else {
                        creditsLabel.style.display = '';
                        creditsCount.textContent = this.userCredits.toString();
                        if (creditsCartIcon) creditsCartIcon.classList.remove('hidden');
                    }
                    
                    // Add glow effect if low credits
                    if (this.userCredits <= 3) {
                        creditsDisplay.classList.add('low-credits-glow');
                    } else {
                        creditsDisplay.classList.remove('low-credits-glow');
                    }
                }
                
                window.userCredits = this.userCredits; // Keep global sync
            }

            // Image generation
            async handleGenerate() {
                if (!this.isAuthenticated) {
                    // Save prompt to localStorage before redirecting to sign in
                    this.savePromptToStorage();
                    
                    this.showMessage(
                        this.currentLanguage === 'ar' 
                            ? 'ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹' 
                            : 'Please sign in first',
                        'warning'
                    );
                    await this.signIn();
                    return;
                }

                if (this.userCredits <= 0) {
                    // Open credit purchase modal with upsell message
                    showCreditModal(true);
                    return;
                }

                const description = document.getElementById('description').value.trim();
                if (!description) {
                    this.showMessage(
                        this.currentLanguage === 'ar' 
                            ? 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ù„Ù„Ø£Ø²ÙŠØ§Ø¡' 
                            : 'Please enter a description',
                        'warning'
                    );
                    return;
                }

                const prompt = description;

                // Collect advanced options
                let options = { ...advancedOptions };
                if (options.aspectRatio === 'custom') {
                    options.customWidth = advancedOptions.customWidth || 512;
                    options.customHeight = advancedOptions.customHeight || 512;
                }

                // Button feedback - change state immediately
                const generateBtn = document.getElementById('generateButton');
                const btnText = document.getElementById('generateButtonText');
                const btnLoading = document.getElementById('generateButtonLoading');
                
                if (generateBtn && btnText && btnLoading) {
                    generateBtn.disabled = true;
                    generateBtn.classList.add('opacity-75', 'cursor-not-allowed');
                    btnText.classList.add('hidden');
                    btnLoading.classList.remove('hidden');
                    
                    // Add vibration feedback if supported
                    if (navigator.vibrate) {
                        navigator.vibrate([50, 30, 50]); // Short vibration pattern
                    }
                }

                this.showGenerationStatus(true);
                this.hideRefinedPrompt();
                this.hideImageResult();

                try {
                    // Get session token for API calls
                    const token = this.clerk?.session ? await this.clerk.session.getToken() : null;
                    const headers = { 
                        'Content-Type': 'application/json',
                        ...(token && { 'Authorization': `Bearer ${token}` })
                    };
                    
                    // Check for notifications in background
                    fetch('/api/notifications', {
                        method: 'POST',
                        headers,
                        body: JSON.stringify({ prompt })
                    }).then(async (response) => {
                        if (response.ok) {
                            const data = await response.json();
                            if (data.notification) {
                                this.showSoftNotification(data.notification);
                            }
                        }
                    }).catch(error => {
                        console.warn('Notification check failed:', error);
                    });

                    let data;
                    
                    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    // SPLIT API: Razza (Ø±Ø²Ù‘Ø©) uses 2-step process to avoid 30s timeout
                    // Taif (Ø·ÙŠÙ) uses original single /api/generate endpoint
                    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    
                    if (options.model === 'nano' || !options.model) {
                        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        // ğŸ¨ RAZZA (Ø±Ø²Ù‘Ø©) - Split API with fun progress messages
                        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        console.log('ğŸ¨ Using split API for Razza...');
                        
                        const statusText = document.getElementById('statusText');
                        const statusSubtext = document.getElementById('statusSubtext');
                        const progressBar = document.getElementById('progressBar');
                        
                        // Fun messages for Razza (takes 30-40s total)
                        const razzaMessages = this.currentLanguage === 'ar' ? [
                            { text: 'Ù†Ù‚Ø±Ø£ Ø·Ù„Ø¨Ùƒ Ø¨Ø¹Ù†Ø§ÙŠØ©...', sub: 'ğŸ“– Ù†ÙÙ‡Ù… Ø§Ù„Ù„ÙŠ ØªØ±ÙŠØ¯Ù‡', progress: 10 },
                            { text: 'Ù†Ø®ØªØ§Ø± Ø£Ø¬Ù…Ù„ Ø§Ù„ØªÙØ§ØµÙŠÙ„...', sub: 'ğŸ‘˜ ØªÙØ§ØµÙŠÙ„ Ù…Ù…ÙŠØ²Ø©', progress: 25 },
                            { text: 'Ù†Ø¯Ø±Ø³ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©...', sub: 'ğŸ” Ø§Ù„Ù…ØµØ± ÙˆØ§Ù„Ø®Ù†Ø¬Ø± ÙˆØ§Ù„ÙƒÙ…Ø©', progress: 40 },
                            { text: 'Ù†Ø±Ø³Ù… Ù„Ùƒ Ø§Ù„ØªØµÙ…ÙŠÙ…...', sub: 'ğŸ¨ Ø¨Ø£ÙŠØ¯ÙŠ ÙÙ†Ø§Ù†ÙŠÙ† Ù…Ø§Ù‡Ø±ÙŠÙ†', progress: 55 },
                            { text: 'Ù†Ø¶ÙŠÙ Ø§Ù„Ù„Ù…Ø³Ø§Øª Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ©...', sub: 'âœ¨ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ù†Ù‚ÙˆØ´ Ø§Ù„Ø£ØµÙŠÙ„Ø©', progress: 70 },
                            { text: 'Ù†ØµÙ‚Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©...', sub: 'ğŸ’ Ø¹Ø´Ø§Ù† ØªØ·Ù„Ø¹ ØªØ­ÙØ© ÙÙ†ÙŠØ©', progress: 85 },
                            { text: 'Ø®Ù„Ø§Øµ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹!', sub: 'ğŸ ØªØµÙ…ÙŠÙ…Ùƒ Ø¬Ø§Ù‡Ø²...', progress: 95 }
                        ] : [
                            { text: 'Reading your request...', sub: 'ğŸ“– Understanding exactly what you want', progress: 10 },
                            { text: 'Selecting beautiful pieces...', sub: 'ğŸ‘˜ From our special collection', progress: 25 },
                            { text: 'Studying the fine details...', sub: 'ğŸ” Mussar, khanjar, and kuma', progress: 40 },
                            { text: 'Creating your design...', sub: 'ğŸ¨ With skilled artistry', progress: 55 },
                            { text: 'Adding Omani touches...', sub: 'âœ¨ Authentic colors and patterns', progress: 70 },
                            { text: 'Polishing the final image...', sub: 'ğŸ’ Making it a masterpiece', progress: 85 },
                            { text: 'Almost there!', sub: 'ğŸ Your design is ready...', progress: 95 }
                        ];
                        
                        let messageIndex = 0;
                        const updateMessage = () => {
                            if (messageIndex < razzaMessages.length) {
                                const msg = razzaMessages[messageIndex];
                                if (statusText) statusText.textContent = msg.text;
                                if (statusSubtext) statusSubtext.textContent = msg.sub;
                                if (progressBar) progressBar.style.width = msg.progress + '%';
                                messageIndex++;
                            }
                        };
                        
                        // Start message rotation (every 5 seconds for ~35s total)
                        updateMessage();
                        const messageInterval = setInterval(updateMessage, 5000);
                        
                        try {
                            // Step 1: Analyze prompt and select references (~10-15s)
                            console.log('ğŸ“Š Step 1: Analyzing prompt...');
                            const analyzeResponse = await fetch('/api/analyze', {
                                method: 'POST',
                                headers,
                                body: JSON.stringify({ prompt, options })
                            });
                            
                            if (!analyzeResponse.ok) {
                                const analyzeError = await analyzeResponse.json();
                                throw new Error(analyzeError.error || 'Analysis failed');
                            }
                            
                            const analyzeData = await analyzeResponse.json();
                            console.log('âœ… Analysis complete, generating image...');
                            
                            // Jump to generating phase
                            messageIndex = Math.max(messageIndex, 3);
                            updateMessage();
                            
                            // Step 2: Generate image with analysis result (~15s)
                            console.log('ğŸ¨ Step 2: Generating image...');
                            const generateResponse = await fetch('/api/generate-image', {
                                method: 'POST',
                                headers,
                                body: JSON.stringify({
                                    analysis: analyzeData.analysis,
                                    selectedImages: analyzeData.selectedImages,
                                    aspectRatio: analyzeData.aspectRatio,
                                    prompt: analyzeData.prompt
                                })
                            });
                            
                            if (!generateResponse.ok) {
                                const genError = await generateResponse.json();
                                throw new Error(genError.error || 'Generation failed');
                            }
                            
                            data = await generateResponse.json();
                            console.log('âœ… Razza generation complete!');
                            
                            // Final message
                            if (progressBar) progressBar.style.width = '100%';
                            
                        } finally {
                            clearInterval(messageInterval);
                        }
                        
                    } else {
                        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        // ğŸ¨ TAIF (Ø·ÙŠÙ) - Async API with fun progress messages
                        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        console.log('ğŸ¨ Using async API for Taif with progress...');
                        
                        const statusText = document.getElementById('statusText');
                        const statusSubtext = document.getElementById('statusSubtext');
                        const progressBar = document.getElementById('progressBar');
                        
                        // Fun messages for Taif (takes ~10-15s)
                        const taifMessages = this.currentLanguage === 'ar' ? [
                            { text: 'Ù†Ø¬Ù‡Ø² Ù„Ùƒ Ø§Ù„Ø·ÙŠÙ...', sub: 'ğŸŒˆ Ù„Ø­Ø¸Ø§Øª ÙˆØªØ´ÙˆÙ Ø§Ù„Ø³Ø­Ø±' },
                            { text: 'Ù†Ø±Ø³Ù… Ø§Ù„Ø­Ù„Ù…...', sub: 'âœï¸ Ø¨Ø£Ù„ÙˆØ§Ù† Ø¹Ù…Ø§Ù†ÙŠØ© Ø£ØµÙŠÙ„Ø©' },
                            { text: 'Ø®Ù„Ø§Øµ Ù‚Ø±Ø¨Ù†Ø§!', sub: 'ğŸ¨ ØªØµÙ…ÙŠÙ…Ùƒ Ø¬Ø§Ù‡Ø²...' }
                        ] : [
                            { text: 'Preparing Taif...', sub: 'ğŸŒˆ Magic in moments' },
                            { text: 'Drawing the dream...', sub: 'âœï¸ With authentic Omani colors' },
                            { text: 'Almost done!', sub: 'ğŸ¨ Your design is ready...' }
                        ];
                        
                        let taifMsgIndex = 0;
                        const taifMessageInterval = setInterval(() => {
                            if (taifMsgIndex < taifMessages.length) {
                                const msg = taifMessages[taifMsgIndex];
                                if (statusText) statusText.textContent = msg.text;
                                if (statusSubtext) statusSubtext.textContent = msg.sub;
                                taifMsgIndex++;
                            }
                        }, 4000);
                        
                        // Initial message
                        if (statusText) statusText.textContent = taifMessages[0].text;
                        if (statusSubtext) statusSubtext.textContent = taifMessages[0].sub;
                        if (progressBar) progressBar.style.width = '15%';
                        
                        try {
                            // Step 1: Start generation (returns immediately with prediction ID)
                            console.log('ğŸš€ Starting Taif generation...');
                            
                            const startResponse = await fetch('/api/start-taif', {
                                method: 'POST',
                                headers,
                                body: JSON.stringify({ 
                                    prompt, 
                                    aspectRatio: options.aspectRatio || '1:1',
                                    mode: options.goFast ? 'fast' : 'quality'
                                })
                            });
                            
                            if (!startResponse.ok) {
                                const startError = await startResponse.json();
                                throw new Error(startError.error || 'Failed to start generation');
                            }
                            
                            const startData = await startResponse.json();
                            console.log('âœ… Generation started, prediction ID:', startData.predictionId);
                            
                            if (progressBar) progressBar.style.width = '25%';
                            
                            // Step 2: Poll for status until complete
                            let attempts = 0;
                            const maxAttempts = 60; // 60 * 2s = 2 minutes max
                            
                            while (attempts < maxAttempts) {
                                await new Promise(resolve => setTimeout(resolve, 2000)); // Poll every 2 seconds
                                attempts++;
                                
                                // Smooth progress animation
                                const estimatedProgress = Math.min(90, 25 + (attempts * 5));
                                if (progressBar) progressBar.style.width = estimatedProgress + '%';
                                
                                console.log(`ğŸ” Checking status (attempt ${attempts})...`);
                                
                                const checkResponse = await fetch('/api/check-taif', {
                                    method: 'POST',
                                    headers,
                                    body: JSON.stringify({ 
                                        predictionId: startData.predictionId,
                                        prompt: prompt
                                    })
                                });
                                
                                if (!checkResponse.ok) {
                                    console.warn('Status check failed, retrying...');
                                    continue;
                                }
                                
                                const checkData = await checkResponse.json();
                                console.log('ğŸ“Š Status:', checkData.status, 'Progress:', checkData.progress);
                                
                                // Check if complete
                                if (checkData.status === 'succeeded') {
                                    console.log('âœ… Taif generation complete!');
                                    if (progressBar) progressBar.style.width = '100%';
                                    data = {
                                        imageUrl: checkData.imageUrl,
                                        enhancedPrompt: startData.enhancedPrompt,
                                        remainingCredits: checkData.remainingCredits
                                    };
                                    break;
                                }
                                
                                // Check if failed
                                if (checkData.status === 'failed') {
                                    throw new Error(checkData.error || 'Generation failed');
                                }
                            }
                            
                            if (attempts >= maxAttempts) {
                                throw new Error('Generation timed out. Please try again.');
                            }
                            
                        } finally {
                            clearInterval(taifMessageInterval);
                        }
                    }

                    // Hide loading FIRST before showing results
                    this.showGenerationStatus(false);
                    
                    // Show refined prompt
                    this.showRefinedPrompt(data.enhancedPrompt);
                    
                    // Show generated image
                    this.showImageResult(data.imageUrl);
                    
                    // Update credits
                    this.userCredits = data.remainingCredits;
                    this.updateCreditsDisplay();
                    
                    // Check for low credits and show alert
                    if (this.userCredits <= 5 && this.userCredits > 0) {
                        setTimeout(() => {
                            showLowCreditAlert();
                        }, 2000);
                    }
                    
                    // Reload history in background
                    this.loadUserHistory().catch(e => console.warn('History refresh failed:', e));
                    
                    this.showMessage(
                        this.currentLanguage === 'ar' 
                            ? 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!' 
                            : 'Image generated successfully!',
                        'success'
                    );
                } catch (error) {
                    console.error('Generation error:', error);
                    this.showMessage(
                        this.currentLanguage === 'ar' 
                            ? 'ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©' 
                            : 'Failed to generate image',
                        'error'
                    );
                } finally {
                    this.showGenerationStatus(false);
                    
                    // Restore button state
                    const generateBtn = document.getElementById('generateButton');
                    const btnText = document.getElementById('generateButtonText');
                    const btnLoading = document.getElementById('generateButtonLoading');
                    
                    if (generateBtn && btnText && btnLoading) {
                        generateBtn.disabled = false;
                        generateBtn.classList.remove('opacity-75', 'cursor-not-allowed');
                        btnText.classList.remove('hidden');
                        btnLoading.classList.add('hidden');
                    }
                }
            }

            showRefinedPrompt(prompt) {
                const container = document.getElementById('refinedPrompt');
                const text = document.getElementById('refinedPromptText');
                const content = document.getElementById('refinedPromptContent');
                
                if (container && text) {
                    text.textContent = prompt;
                    container.classList.add('show');
                    // Keep collapsed by default - user can click to expand
                    if (content) content.classList.add('hidden');
                }
            }

            hideRefinedPrompt() {
                const container = document.getElementById('refinedPrompt');
                if (container) {
                    container.classList.remove('show');
                }
            }

            showImageResult(imageUrl) {
                const container = document.getElementById('imageResult');
                const image = document.getElementById('generatedImage');
                
                if (container && image) {
                    image.src = imageUrl;
                    container.classList.remove('hidden');
                }
            }

            hideImageResult() {
                const container = document.getElementById('imageResult');
                if (container) {
                    container.classList.add('hidden');
                }
            }

            showGenerationStatus(show) {
                const status = document.getElementById('generationStatus');
                const progressBar = document.getElementById('progressBar');
                const statusText = document.getElementById('statusText');
                const statusSubtext = document.getElementById('statusSubtext');
                
                if (status) {
                    if (show) {
                        status.classList.add('active');
                        // Reset progress bar
                        if (progressBar) progressBar.style.width = '5%';
                        // Set initial fun message
                        if (statusText) {
                            statusText.textContent = this.currentLanguage === 'ar' 
                                ? 'Ø¬Ø§Ø±Ù Ø¥Ø¨Ø¯Ø§Ø¹ ØªØµÙ…ÙŠÙ…Ùƒ...' 
                                : 'Creating your design...';
                        }
                        if (statusSubtext) {
                            statusSubtext.textContent = this.currentLanguage === 'ar'
                                ? 'âœ¨ Ù†Ø®ØªØ§Ø± Ø£Ø¬Ù…Ù„ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù„Ùƒ'
                                : 'âœ¨ Selecting the best details for you';
                        }
                    } else {
                        // Use requestAnimationFrame to ensure DOM is updated
                        requestAnimationFrame(() => {
                            status.classList.remove('active');
                        });
                    }
                }
            }

            // History management
            async loadUserHistory() {
                if (!this.isAuthenticated) return;

                try {
                    const token = await this.clerk?.session?.getToken();
                    const response = await fetch('/api/history', {
                        headers: token ? {
                            'Authorization': `Bearer ${token}`
                        } : {}
                    });
                    if (response.ok) {
                        const data = await response.json();
                        this.updateHistoryGrid(data.generations || []);
                    }
                } catch (error) {
                    console.error('Failed to load history:', error);
                }
            }

            updateHistoryGrid(generations) {
                const grid = document.getElementById('historyGrid');
                if (!grid) return;

                if (generations.length === 0) {
                    grid.innerHTML = `
                        <div class="text-center text-gray-500 col-span-full py-8" data-en="No generations yet. Create your first traditional clothing!" data-ar="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¨Ø¯Ø§Ø¹Ø§Øª Ø¨Ø¹Ø¯. Ø£Ù†Ø´Ø¦ Ø£ÙˆÙ„ Ø£Ø²ÙŠØ§Ø¡Ùƒ Ø§Ù„ØªØ±Ø§Ø«ÙŠØ©!">
                            ${this.currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¨Ø¯Ø§Ø¹Ø§Øª Ø¨Ø¹Ø¯. Ø£Ù†Ø´Ø¦ Ø£ÙˆÙ„ Ø£Ø²ÙŠØ§Ø¡Ùƒ Ø§Ù„ØªØ±Ø§Ø«ÙŠØ©!' : 'No generations yet. Create your first traditional clothing!'}
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = generations.map(gen => `
                    <div class="bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all group">
                        <div class="aspect-square relative">
                            <img src="${gen.image_url}" alt="${gen.prompt}" class="w-full h-full object-cover">
                            
                            <!-- Action Buttons Overlay -->
                            <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2">
                                <button 
                                    onclick="downloadHistoryImage('${gen.image_url}', '${gen.prompt.replace(/'/g, "\\'")}');" 
                                    class="p-2 bg-white/90 hover:bg-white rounded-full transition-colors" 
                                    title="${this.currentLanguage === 'ar' ? 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©' : 'Download Image'}">
                                    <svg class="w-4 h-4 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                </button>
                                <button 
                                    onclick="copyPromptToClipboard('${gen.prompt.replace(/'/g, "\\'")}', '${gen.id}', event)" 
                                    class="p-2 bg-white/90 hover:bg-white rounded-full transition-colors" 
                                    title="${this.currentLanguage === 'ar' ? 'Ù†Ø³Ø® Ø§Ù„ÙˆØµÙ' : 'Copy Prompt'}">
                                    <svg class="w-4 h-4 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                    </svg>
                                </button>
                                <button 
                                    onclick="deleteHistoryImage('${gen.id}')" 
                                    class="p-2 bg-red-500/90 hover:bg-red-500 rounded-full transition-colors" 
                                    title="${this.currentLanguage === 'ar' ? 'Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©' : 'Delete Image'}">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-3">
                            <p class="text-xs text-gray-600 truncate cursor-pointer hover:text-gray-800" onclick="copyPromptToClipboard('${gen.prompt.replace(/'/g, "\\'")}', '${gen.id}', event)" title="${this.currentLanguage === 'ar' ? 'Ø§Ø¶ØºØ· Ù„Ù†Ø³Ø® Ø§Ù„ÙˆØµÙ' : 'Click to copy prompt'}">${gen.prompt}</p>
                            <div class="flex items-center justify-between mt-2">
                                <p class="text-xs text-gray-400">${new Date(gen.created_at).toLocaleDateString()}</p>
                                <div class="flex gap-1">
                                    <button onclick="copyPromptToClipboard('${gen.prompt.replace(/'/g, "\\'")}', '${gen.id}', event)" class="text-xs text-[#2C3E50] hover:text-[#1a252f] transition-colors">
                                        ${this.currentLanguage === 'ar' ? 'Ù†Ø³Ø®' : 'Copy'}
                                    </button>
                                    <span class="text-xs text-gray-300">â€¢</span>
                                    <button onclick="downloadHistoryImage('${gen.image_url}', '${gen.prompt.replace(/'/g, "\\'")}');" class="text-xs text-[#D4AF37] hover:text-[#8B4513] transition-colors">
                                        ${this.currentLanguage === 'ar' ? 'ØªØ­Ù…ÙŠÙ„' : 'Download'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            openHistoryModal() {
                if (!this.isAuthenticated) {
                    this.showMessage(
                        this.currentLanguage === 'ar' 
                            ? 'ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªØ§Ø±ÙŠØ®' 
                            : 'Please sign in to view history',
                        'warning'
                    );
                    return;
                }

                const modal = document.getElementById('historyModal');
                if (modal) {
                    modal.classList.add('active');
                }
            }

            closeHistoryModal() {
                const modal = document.getElementById('historyModal');
                if (modal) {
                    modal.classList.remove('active');
                }
            }

            // Utility methods
            downloadImage() {
                const image = document.getElementById('generatedImage');
                const prompt = document.getElementById('description')?.value || 'omani_clothing';
                if (image && image.src) {
                    window.downloadImageByUrl(image.src, prompt);
                }
            }

            showMessage(message, type = 'info') {
                const container = document.getElementById('messageContainer');
                if (!container) return;

                const messageEl = document.createElement('div');
                const bgColor = {
                    success: 'bg-green-100 border-green-300 text-green-800',
                    error: 'bg-red-100 border-red-300 text-red-800',
                    warning: 'bg-[#FDF8F3] border-[#E8E4DE] text-[#8B4513]',
                    info: 'bg-blue-100 border-blue-300 text-blue-800'
                };

                messageEl.className = `${bgColor[type]} px-4 py-3 rounded-xl border mb-2 transform translate-x-full transition-transform duration-300`;
                messageEl.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span class="text-sm">${message}</span>
                        <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-current opacity-70 hover:opacity-100">âœ•</button>
                    </div>
                `;

                container.appendChild(messageEl);

                // Slide in
                setTimeout(() => {
                    messageEl.classList.remove('translate-x-full');
                }, 10);

                // Auto remove after 5 seconds
                setTimeout(() => {
                    if (messageEl.parentNode) {
                        messageEl.classList.add('translate-x-full');
                        setTimeout(() => messageEl.remove(), 300);
                    }
                }, 5000);
            }

            // Soft notification popup for AI feedback
            showSoftNotification(message) {
                const container = document.getElementById('aiMessagePlaceholder');
                if (!container) return;

                // Update content
                container.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3 rtl:space-x-reverse">
                            <div class="w-8 h-8 bg-gradient-to-r from-[#2C3E50] to-[#8B4513] rounded-full flex items-center justify-center">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <span class="text-[#3E3E3E] text-sm font-medium">${message}</span>
                        </div>
                        <button onclick="this.parentElement.parentElement.classList.add('hidden')" class="text-[#5D6D7E] hover:text-[#2C3E50] transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                `;

                // Show with animation
                container.classList.remove('hidden');
                container.style.transform = 'translateY(100%)';
                container.style.opacity = '0';
                
                setTimeout(() => {
                    container.style.transform = 'translateY(0)';
                    container.style.opacity = '1';
                    container.style.transition = 'all 0.3s ease-out';
                }, 10);

                // Auto hide after 8 seconds (longer for notifications)
                setTimeout(() => {
                    container.style.transform = 'translateY(100%)';
                    container.style.opacity = '0';
                    setTimeout(() => {
                        container.classList.add('hidden');
                    }, 300);
                }, 8000);
            }
        }

        // Advanced Options State
        const advancedOptions = {
            model: 'nano', // 'nano' (Razza/Gemini) or 'flux' (Taif via Replicate)
            mode: 'quality', // 'quality' or 'fast' - only used by Taif
            aspectRatio: '1:1',
            outputFormat: 'webp'
        };

        function toggleAdvancedOptions() {
            const panel = document.getElementById('advancedOptionsPanel');
            const chevron = document.getElementById('advancedOptionsChevron');
            
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                chevron.style.transform = 'rotate(180deg)';
                
                // Smooth slide-in animation
                panel.style.opacity = '0';
                panel.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    panel.style.transition = 'all 0.3s ease-out';
                    panel.style.opacity = '1';
                    panel.style.transform = 'translateY(0)';
                }, 10);
            } else {
                panel.style.opacity = '0';
                panel.style.transform = 'translateY(-10px)';
                chevron.style.transform = 'rotate(0deg)';
                setTimeout(() => {
                    panel.classList.add('hidden');
                }, 300);
            }
        }

        // Toggle refined prompt details (collapsible)
        function toggleRefinedPromptDetails() {
            const content = document.getElementById('refinedPromptContent');
            const chevron = document.getElementById('refinedPromptChevron');
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                chevron.style.transform = 'rotate(180deg)';
            } else {
                content.classList.add('hidden');
                chevron.style.transform = 'rotate(0deg)';
            }
        }

        function setGenerationMode(mode) {
            advancedOptions.mode = mode;
            
            // Update Ø·ÙŠÙ speed buttons
            const qualityBtn = document.getElementById('taifQualityMode');
            const fastBtn = document.getElementById('taifFastMode');
            
            const activeClass = 'px-3 py-2 bg-[#2C3E50] border-2 border-[#2C3E50] text-white rounded-lg text-xs font-medium transition-all flex items-center justify-center gap-1';
            const inactiveClass = 'px-3 py-2 bg-[#F8F5F0] border border-[#E8E4DE] text-[#5D6D7E] rounded-lg text-xs font-medium transition-all hover:bg-[#F0EDE8] flex items-center justify-center gap-1';
            
            if (mode === 'quality') {
                if (qualityBtn) qualityBtn.className = activeClass;
                if (fastBtn) fastBtn.className = inactiveClass;
            } else {
                if (qualityBtn) qualityBtn.className = inactiveClass;
                if (fastBtn) fastBtn.className = activeClass;
            }
            
            console.log('Generation mode set to:', mode);
        }

        function handleModelToggle(isChecked) {
            const model = isChecked ? 'flux' : 'nano';
            setModel(model);
        }

        function setModel(model) {
            advancedOptions.model = model;
            
            const razzaLabel = document.getElementById('razzaLabel');
            const taifLabel = document.getElementById('taifLabel');
            const razzaPill = document.getElementById('razzaPill');
            const taifPill = document.getElementById('taifPill');
            const modelToggle = document.getElementById('modelToggle');
            const taifExtraOptions = document.getElementById('taifExtraOptions');
            
            if (model === 'nano') {
                // Ø±Ø²Ù‘Ø© active
                razzaLabel.classList.add('active');
                razzaLabel.classList.remove('inactive');
                taifLabel.classList.remove('active');
                taifLabel.classList.add('inactive');
                
                // Update pills
                razzaPill.className = 'px-2.5 py-1 bg-[#2C3E50] text-white rounded-full flex items-center gap-1 transition-all text-[10px]';
                taifPill.className = 'px-2.5 py-1 bg-[#F8F5F0] text-[#95A5A6] rounded-full flex items-center gap-1 transition-all text-[10px]';
                
                // Sync toggle state
                if (modelToggle) modelToggle.checked = false;
                
                // Hide Ø·ÙŠÙ extra options with smooth animation
                if (taifExtraOptions) {
                    taifExtraOptions.style.maxHeight = '0';
                    taifExtraOptions.style.opacity = '0';
                }
            } else {
                // Ø·ÙŠÙ active
                taifLabel.classList.add('active');
                taifLabel.classList.remove('inactive');
                razzaLabel.classList.remove('active');
                razzaLabel.classList.add('inactive');
                
                // Update pills
                taifPill.className = 'px-2.5 py-1 bg-[#D4AF37] text-white rounded-full flex items-center gap-1 transition-all text-[10px]';
                razzaPill.className = 'px-2.5 py-1 bg-[#F8F5F0] text-[#95A5A6] rounded-full flex items-center gap-1 transition-all text-[10px]';
                
                // Sync toggle state
                if (modelToggle) modelToggle.checked = true;
                
                // Show Ø·ÙŠÙ extra options with smooth animation
                if (taifExtraOptions) {
                    taifExtraOptions.style.maxHeight = '300px';
                    taifExtraOptions.style.opacity = '1';
                }
            }
            
            console.log('ğŸ¨ Model set to:', model === 'nano' ? 'Ø±Ø²Ù‘Ø© (Razza)' : 'Ø·ÙŠÙ (Taif)');
        }

        function setAspectRatio(ratio) {
            advancedOptions.aspectRatio = ratio;
            // Hide/show custom inputs
            const customInputs = document.getElementById('customAspectInputs');
            if (ratio === 'custom') {
                customInputs.classList.remove('hidden');
            } else {
                customInputs.classList.add('hidden');
            }
            // Update all buttons
            document.querySelectorAll('.aspect-ratio-btn').forEach(btn => {
                btn.className = 'aspect-ratio-btn px-2 py-2 bg-gray-100 border-2 border-gray-200 text-gray-600 rounded-lg text-xs font-medium transition-all hover:bg-gray-200 flex flex-col items-center justify-center gap-1';
            });
            // Highlight selected
            event.target.closest('.aspect-ratio-btn').className = 'aspect-ratio-btn px-2 py-2 bg-[#2C3E50] border-2 border-[#2C3E50] text-white rounded-lg text-xs font-medium transition-all flex flex-col items-center justify-center gap-1';
            console.log('Aspect ratio set to:', ratio);
        }

        function applyCustomAspect() {
            const w = parseInt(document.getElementById('customWidth').value);
            const h = parseInt(document.getElementById('customHeight').value);
            if (isNaN(w) || isNaN(h) || w < 128 || h < 128 || w > 2048 || h > 2048) {
                alert('Please enter valid width and height (128-2048)');
                return;
            }
            advancedOptions.aspectRatio = 'custom';
            advancedOptions.customWidth = w;
            advancedOptions.customHeight = h;
            console.log('Custom aspect ratio applied:', w, 'x', h);
        }

        function setOutputFormat(format) {
            advancedOptions.outputFormat = format;
            
            // Update all buttons
            document.querySelectorAll('.output-format-btn').forEach(btn => {
                btn.className = 'output-format-btn px-3 py-2 bg-[#F8F5F0] border border-[#E8E4DE] text-[#5D6D7E] rounded-lg text-xs font-medium transition-all hover:bg-[#F0EDE8]';
            });
            
            // Highlight selected
            event.target.closest('.output-format-btn').className = 'output-format-btn px-3 py-2 bg-[#2C3E50] border-2 border-[#2C3E50] text-white rounded-lg text-xs font-medium transition-all';
            
            console.log('Output format set to:', format);
        }

        // Developer modal functions
        function showDeveloperInfo() {
            const modal = document.getElementById('developerModal');
            const arabicContent = modal.querySelector('.ar-content');
            const englishContent = modal.querySelector('.en-content');
            
            // Show content based on current language
            const isArabic = document.documentElement.dir === 'rtl';
            if (isArabic) {
                arabicContent.classList.remove('hidden');
                englishContent.classList.add('hidden');
            } else {
                arabicContent.classList.add('hidden');
                englishContent.classList.remove('hidden');
            }
            
            modal.classList.remove('hidden');
            // Add animation
            setTimeout(() => {
                modal.querySelector('.bg-white').style.transform = 'scale(1)';
            }, 10);
        }

        function hideDeveloperInfo() {
            const modal = document.getElementById('developerModal');
            modal.querySelector('.bg-white').style.transform = 'scale(0.95)';
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 200);
        }

        // Close modal on backdrop click
        document.getElementById('developerModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideDeveloperInfo();
            }
        });

        // Credit Purchase Functions
        function showCreditModal() {
            const modal = document.getElementById('creditPurchaseModal');
            const arabicContent = modal.querySelector('.ar-content');
            const englishContent = modal.querySelector('.en-content');
            
            modal.classList.remove('hidden');
            // Add animation
            setTimeout(() => {
                modal.querySelector('.bg-white\\/95').style.transform = 'scale(1)';
            }, 10);
        }

        function closeCreditModal() {
            const modal = document.getElementById('creditPurchaseModal');
            modal.querySelector('.bg-white\\/95').style.transform = 'scale(0.95)';
            setTimeout(() => {
                modal.classList.add('hidden');
                // Reset to page 1 after closing
                setTimeout(() => {
                    const container = document.getElementById('modalContainer');
                    container.style.transform = 'translateX(0)';
                }, 200);
            }, 200);
        }

        function buyCredits(credits, omr) {
            // Store selected package info
            window.selectedPackage = { credits, omr };
            
            // Update page 2 with selected package info
            document.getElementById('selectedPrice').innerHTML = `${omr} <span data-en="OMR" data-ar="Ø±ÙŠØ§Ù„">Ø±ÙŠØ§Ù„</span>`;
            document.getElementById('selectedCredits').innerHTML = `${credits} <span data-en="credits" data-ar="Ø±ØµÙŠØ¯">Ø±ØµÙŠØ¯</span>`;
            
            // Get and display user ID (full ID, not shortened)
            let userId = getUserId();
            document.getElementById('userIdDisplay').textContent = userId;
            document.getElementById('userIdDisplay').setAttribute('data-full-id', userId);
            
            // Swipe to page 2
            const container = document.getElementById('modalContainer');
            container.style.transform = 'translateX(-100%)';
        }
        
        function getUserId() {
            // Try multiple ways to get user information
            let userId = 'unknown-user';
            
            // Method 1: Try global heibaUser (authenticated user)
            if (window.heibaUser) {
                userId = window.heibaUser.id || userId;
            }
            
            // Method 2: Try window.app.clerk
            if (userId === 'unknown-user' && window.app?.clerk?.user) {
                userId = window.app.clerk.user.id || window.app.clerk.user.externalId || userId;
            }
            
            // Method 3: Try direct Clerk access
            if (userId === 'unknown-user' && window.Clerk?.user) {
                userId = window.Clerk.user.id || window.Clerk.user.externalId || userId;
            }
            
            // Method 4: Use browser session ID as fallback
            if (userId === 'unknown-user' && window.heibaSession) {
                userId = window.heibaSession.id;
            }
            
            // Method 5: Generate a browser-based ID if still unknown (last resort)
            if (userId === 'unknown-user') {
                let browserId = localStorage.getItem('heiba-browser-id');
                if (!browserId) {
                    browserId = 'browser-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('heiba-browser-id', browserId);
                }
                userId = browserId;
            }
            
            return userId;
        }
        
        // Universal copy function with inline animation feedback
        function copyToClipboard(text, buttonElement) {
            // Try modern clipboard API first
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    showCopyFeedback(buttonElement);
                }).catch(err => {
                    console.error('Clipboard API failed:', err);
                    fallbackCopy(text, buttonElement);
                });
            } else {
                // Fallback for older browsers or insecure contexts
                fallbackCopy(text, buttonElement);
            }
        }
        
        function fallbackCopy(text, buttonElement) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopyFeedback(buttonElement);
            } catch (err) {
                console.error('Fallback copy failed:', err);
            }
            
            document.body.removeChild(textArea);
        }
        
        function showCopyFeedback(buttonElement) {
            if (!buttonElement) return;
            
            // Store original content
            const originalHTML = buttonElement.innerHTML;
            const isArabic = document.documentElement.dir === 'rtl';
            
            // Add success animation
            buttonElement.style.transform = 'scale(0.95)';
            buttonElement.style.transition = 'all 0.15s ease';
            
            // Change to checkmark
            setTimeout(() => {
                buttonElement.innerHTML = `
                    <div class="flex items-center justify-center gap-2">
                        <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                        </svg>
                        <span class="font-bold text-green-600">${isArabic ? 'ØªÙ… Ø§Ù„Ù†Ø³Ø®!' : 'Copied!'}</span>
                    </div>
                `;
                buttonElement.style.transform = 'scale(1.05)';
                buttonElement.style.backgroundColor = '#dcfce7';
                buttonElement.style.borderColor = '#22c55e';
            }, 150);
            
            // Restore original after delay
            setTimeout(() => {
                buttonElement.style.transform = 'scale(1)';
                setTimeout(() => {
                    buttonElement.innerHTML = originalHTML;
                    buttonElement.style.backgroundColor = '';
                    buttonElement.style.borderColor = '';
                }, 200);
            }, 1500);
        }
        
        function copyUserId(event) {
            const userIdEl = document.getElementById('userIdDisplay');
            const fullId = userIdEl.getAttribute('data-full-id') || userIdEl.textContent;
            const button = event?.currentTarget || event?.target?.closest('button');
            copyToClipboard(fullId, button);
        }
        
        function openWhatsAppForPurchase() {
            const userIdEl = document.getElementById('userIdDisplay');
            const userId = userIdEl.getAttribute('data-full-id') || userIdEl.textContent;
            const { credits, omr } = window.selectedPackage || { credits: 50, omr: 4 };
            const isArabic = document.documentElement.dir === 'rtl';
            
            // Create WhatsApp message based on language
            let message;
            if (isArabic) {
                message = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…! Ø£Ø±ÙŠØ¯ Ø´Ø±Ø§Ø¡ Ø±ØµÙŠØ¯ Ù„ØªØ·Ø¨ÙŠÙ‚ Ù‡ÙŠØ¨Ø© Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ%0A%0AØ§Ù„Ù…Ø¨Ù„Øº: ${omr} Ø±ÙŠØ§Ù„ Ø¹Ù…Ø§Ù†ÙŠ (${credits} Ø±ØµÙŠØ¯)%0AÙ…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userId}%0A%0AØ³Ø£Ø­ÙˆÙ„ Ù„Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:%0A${CONTACT_INFO.bankAccount}%0AØ¨Ø§Ø³Ù…: AL MAALA AL MAAWALI%0A%0AØ³Ø£Ø´Ø§Ø±Ùƒ Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ø¹Ùƒ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹%0A%0AØ´ÙƒØ±Ø§Ù‹ Ù„Ùƒ!`;
            } else {
                message = `Hello! I'd like to buy credits for Heiba AI%0A%0AAmount: ${omr} OMR (${credits} credits)%0AUser ID: ${userId}%0A%0AI will transfer by phone:%0A${CONTACT_INFO.bankAccount}%0AName: AL MAALA AL MAAWALI%0A%0AI'll share the transfer receipt with you after payment%0A%0AThank you!`;
            }
            
            // WhatsApp Business API - Works on all platforms
            const phoneNumber = CONTACT_INFO.phoneWithCountry;
            
            // Report conversion when user clicks WhatsApp
            if (typeof window.gtag_report_conversion === 'function') {
                window.gtag_report_conversion();
            }

            // Use api.whatsapp.com for WhatsApp Business (stable, universal)
            const whatsappUrl = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${message}`;
            
            // Open in new tab
            window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
            
            // Show confirmation message
            if (window.app) {
                window.app.showMessage(
                    isArabic 
                        ? 'ØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨! Ø£ÙƒÙ…Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ´Ø§Ø±Ùƒ Ø§Ù„Ø¥ÙŠØµØ§Ù„' 
                        : 'WhatsApp opened! Complete transfer and share receipt',
                    'success'
                );
            }
        }
        
        function goBackToPackages() {
            const container = document.getElementById('modalContainer');
            container.style.transform = 'translateX(0)';
        }

        function buyCreditsCustom() {
            const customAmount = parseFloat(document.getElementById('customAmount').value);
            if (customAmount && customAmount >= 0.5 && customAmount <= 100) {
                const credits = Math.floor(customAmount * 10);
                buyCredits(credits, customAmount);
            } else {
                if (window.app) {
                    const isArabic = document.documentElement.dir === 'rtl';
                    window.app.showMessage(
                        isArabic 
                            ? 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­ (0.5-100 Ø±ÙŠØ§Ù„)' 
                            : 'Please enter a valid amount (0.5-100 OMR)',
                        'warning'
                    );
                }
            }
        }

        function showCreditModal(showUpsell = false) {
            const modal = document.getElementById('creditPurchaseModal');
            const upsellBanner = document.getElementById('upsellBanner');
            
            // Show/hide upsell banner based on parameter
            if (upsellBanner) {
                if (showUpsell) {
                    upsellBanner.classList.remove('hidden');
                } else {
                    upsellBanner.classList.add('hidden');
                }
            }
            
            // Update modal content based on language
            modal.classList.remove('hidden');
            
            // Add animation
            setTimeout(() => {
                modal.querySelector('.bg-white\\/95').style.transform = 'scale(1)';
            }, 10);
        }
        
        function showEnterpriseContact() {
            // Close credit modal first
            closeCreditModal();
            
            // Show enterprise modal
            setTimeout(() => {
                const modal = document.getElementById('enterpriseModal');
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.querySelector('.bg-white').style.transform = 'scale(1)';
                }, 10);
            }, 300);
        }

        function closeEnterpriseModal() {
            const modal = document.getElementById('enterpriseModal');
            modal.querySelector('.bg-white').style.transform = 'scale(0.95)';
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 200);
        }

        function contactViaWhatsApp() {
            const isArabic = document.documentElement.dir === 'rtl';
            const phoneNumber = CONTACT_INFO.phoneWithCountry;
            const message = isArabic
                ? 'Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…!\n\nØ£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø¨Ø§Ù‚Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª ğŸ¢\n\nÙ†Ø­ØªØ§Ø¬ Ø­Ù„ÙˆÙ„ Ù…Ø®ØµØµØ© Ù„Ù„Ø´Ø±ÙƒØ§Øª'
                : 'Hello!\n\nI would like to inquire about the Enterprise package ğŸ¢\n\nWe need custom business solutions';
            
            const encodedMessage = encodeURIComponent(message);
            
            // Use WhatsApp Business API for stability
            window.open(`https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedMessage}`, '_blank', 'noopener,noreferrer');
        }

        // Smart credit alerts
        function showLowCreditAlert() {
            // Gentle orange glow on credit counter
            const creditsDisplay = document.getElementById('creditsDisplay');
            if (creditsDisplay) {
                creditsDisplay.classList.add('low-credits-glow');
                
                // Remove glow after 5 seconds
                setTimeout(() => {
                    creditsDisplay.classList.remove('low-credits-glow');
                }, 5000);
            }
        }

        function checkCreditsAndNotify() {
            const userCredits = window.app?.userCredits || 0;
            
            if (userCredits <= 0) {
                setTimeout(() => showCreditModal(), 1000);
            } else if (userCredits <= 3) {
                showLowCreditAlert();
            }
        }

        // Close credit modal on backdrop click and trigger exit-intent
        document.getElementById('creditPurchaseModal').addEventListener('click', function(e) {
            if (e.target === this) {
                triggerExitIntent();
            }
        });

        // ESC key listener for exit-intent
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const creditModal = document.getElementById('creditPurchaseModal');
                if (!creditModal.classList.contains('hidden')) {
                    triggerExitIntent();
                }
            }
        });

        // Exit-Intent Discount Functions
        function triggerExitIntent() {
            // Check if user has already seen discount (first-time only)
            const hasSeenDiscount = localStorage.getItem('heiba-discount-shown');
            
            if (!hasSeenDiscount) {
                // Close credit modal first
                closeCreditModal();
                
                // Show discount popup after short delay
                setTimeout(() => {
                    showExitDiscount();
                }, 300);
                
                // Mark as shown
                localStorage.setItem('heiba-discount-shown', 'true');
            } else {
                // Just close the modal normally
                closeCreditModal();
            }
        }

        function showExitDiscount() {
            const modal = document.getElementById('exitDiscountModal');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.querySelector('.bg-white').style.transform = 'scale(1)';
            }, 10);
        }

        function closeExitDiscount() {
            const modal = document.getElementById('exitDiscountModal');
            modal.querySelector('.bg-white').style.transform = 'scale(0.95)';
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 200);
        }

        function acceptDiscount() {
            closeExitDiscount();
            // Automatically proceed with first discounted package selection
            setTimeout(() => {
                showCreditModal();
            }, 300);
        }

        function buyCreditsWithDiscount(credits, omr) {
            closeExitDiscount();
            // Open credit modal and go to page 2 with discount applied
            setTimeout(() => {
                window.selectedPackage = { credits, omr };
                document.getElementById('selectedPrice').innerHTML = `${omr} <span data-en="OMR" data-ar="Ø±ÙŠØ§Ù„">Ø±ÙŠØ§Ù„</span>`;
                let userId = getUserId();
                document.getElementById('userIdDisplay').textContent = userId;
                showCreditModal();
                setTimeout(() => {
                    const container = document.getElementById('modalContainer');
                    container.style.transform = 'translateX(-100%)';
                }, 100);
            }, 300);
        }

        // Copy bank number function
        function copyBankNumber(event) {
            const bankNumber = CONTACT_INFO.bankAccount;
            const button = event?.currentTarget || event?.target?.closest('button');
            copyToClipboard(bankNumber, button);
        }

        // Show/Hide Callback Form
        function showCallbackForm() {
            const form = document.getElementById('callbackFormContainer');
            const toggle = document.getElementById('callbackToggle');
            form.classList.toggle('hidden');
            if (!form.classList.contains('hidden')) {
                document.getElementById('callbackContact').focus();
            }
        }

        // Callback Request Function
        async function submitCallbackRequest() {
            const contact = document.getElementById('callbackContact').value.trim();
            const notes = '';  // Removed notes field for simplicity
            const isArabic = document.documentElement.dir === 'rtl';

            if (!contact) {
                if (window.app) {
                    window.app.showMessage(
                        isArabic ? 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„' : 'Please enter contact number',
                        'error'
                    );
                }
                return;
            }

            try {
                const response = await fetch('/api/callback-requests', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contact,
                        notes,
                        userId: getUserId(),
                        package: window.selectedPackage
                    })
                });

                if (response.ok) {
                    if (window.app) {
                        window.app.showMessage(
                            isArabic ? 'Ø´ÙƒØ±Ø§Ù‹! Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ ğŸ™' : 'Thank you! We\'ll contact you soon ğŸ™',
                            'success'
                        );
                    }
                    // Clear and hide form
                    document.getElementById('callbackContact').value = '';
                    document.getElementById('callbackFormContainer').classList.add('hidden');
                } else {
                    throw new Error('Failed to submit');
                }
            } catch (error) {
                console.error('Callback request error:', error);
                if (window.app) {
                    window.app.showMessage(
                        isArabic ? 'Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨' : 'Error occurred, please try via WhatsApp',
                        'error'
                    );
                }
            }
        }

        // Share functions
        function shareOnWhatsApp() {
            const isArabic = document.documentElement.dir === 'rtl';
            const message = isArabic 
                ? 'Ø£Ø­Ø³Ù† Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ±Ø³Ù… Ø§Ù„Ù…ÙØµØ± ğŸ‡´ğŸ‡²âœ¨\nØ¬Ø±Ù‘Ø¨ Ù…Ø¬Ø§Ù†Ø§Ù‹: www.haiba.store'
                : 'The best AI for Omani traditional clothing ğŸ‡´ğŸ‡²âœ¨\nTry for free: www.haiba.store';
            const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        function shareGeneral() {
            const isArabic = document.documentElement.dir === 'rtl';
            const shareData = {
                title: isArabic ? 'Ù‡ÙŠØ¨Ø© - Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„Ù…ÙØµØ±' : 'Haiba - AI for Omani Clothing',
                text: isArabic 
                    ? 'Ø£Ø­Ø³Ù† Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ±Ø³Ù… Ø§Ù„Ù…ÙØµØ± ğŸ‡´ğŸ‡²âœ¨'
                    : 'The best AI for Omani traditional clothing ğŸ‡´ğŸ‡²âœ¨',
                url: 'https://www.haiba.store'
            };

            if (navigator.share) {
                navigator.share(shareData).catch(err => console.log('Share cancelled'));
            } else {
                // Fallback to copying link
                copyWebsiteLink();
            }
        }

        function copyWebsiteLink(event) {
            const url = 'www.haiba.store';
            const button = event?.currentTarget || event?.target?.closest('button');
            copyToClipboard(url, button);
        }

        // Update "Ø±Ø¨Ù…Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹" button to trigger exit-intent
        const maybeLaterButtons = document.querySelectorAll('[onclick*="closeCreditModal"]');
        maybeLaterButtons.forEach(button => {
            const originalOnclick = button.getAttribute('onclick');
            if (originalOnclick && originalOnclick.includes('closeCreditModal') && 
                button.textContent.includes('Ø±Ø¨Ù…Ø§') || button.textContent.includes('Maybe')) {
                button.setAttribute('onclick', 'triggerExitIntent()');
            }
        });

        // Close exit discount on backdrop click
        document.getElementById('exitDiscountModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeExitDiscount();
            }
        });

        // Suggested Prompts Array - Single person closeup/headshot focused on dishdasha and musar
        const suggestedPrompts = [
            {
                emoji: 'ğŸ‘¨',
                titleAr: 'Ø¨ÙˆØ±ØªØ±ÙŠÙ‡ ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ',
                titleEn: 'Classic Portrait',
                promptAr: 'ØµÙˆØ±Ø© Ù‚Ø±ÙŠØ¨Ø© Ù„ÙˆØ¬Ù‡ Ø±Ø¬Ù„ Ø¹Ù…Ø§Ù†ÙŠ ÙˆØ³ÙŠÙ… ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡ Ù†Ø§ØµØ¹Ø© ÙˆÙ…ØµØ± Ø£Ø­Ù…Ø± ØªÙ‚Ù„ÙŠØ¯ÙŠØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø·Ø¨ÙŠØ¹ÙŠØ© Ù†Ø§Ø¹Ù…Ø©ØŒ Ø®Ù„ÙÙŠØ© Ø¨Ø³ÙŠØ·Ø©',
                promptEn: 'Close-up portrait of handsome Omani man wearing pristine white dishdasha and traditional red musar, soft natural lighting, simple background'
            },
            {
                emoji: 'ğŸ˜Š',
                titleAr: 'Ø§Ø¨ØªØ³Ø§Ù…Ø© Ø¯Ø§ÙØ¦Ø©',
                titleEn: 'Warm Smile',
                promptAr: 'ØµÙˆØ±Ø© Ù†ØµÙÙŠØ© Ù„Ø´Ø§Ø¨ Ø¹Ù…Ø§Ù†ÙŠ Ù…Ø¨ØªØ³Ù… ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡ ÙˆÙ…ØµØ± ÙƒØ­Ù„ÙŠØŒ Ù†Ø¸Ø±Ø© ÙˆØ¯ÙˆØ¯Ø©ØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø°Ù‡Ø¨ÙŠØ© Ø¯Ø§ÙØ¦Ø©',
                promptEn: 'Half-body shot of smiling young Omani man wearing white dishdasha and navy musar, friendly gaze, warm golden lighting'
            },
            {
                emoji: 'ğŸ¯',
                titleAr: 'Ù†Ø¸Ø±Ø© ÙˆØ§Ø«Ù‚Ø©',
                titleEn: 'Confident Look',
                promptAr: 'Ø¨ÙˆØ±ØªØ±ÙŠÙ‡ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ø±Ø¬Ù„ Ø¹Ù…Ø§Ù†ÙŠ Ø¨Ù†Ø¸Ø±Ø© ÙˆØ§Ø«Ù‚Ø©ØŒ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø±Ù…Ø§Ø¯ÙŠØ© ÙØ§ØªØ­Ø© ÙˆÙ…ØµØ± Ø£Ø³ÙˆØ¯ØŒ Ø®Ù„ÙÙŠØ© Ù…Ø­Ø§ÙŠØ¯Ø©ØŒ ØªØµÙˆÙŠØ± Ø§Ø³ØªÙˆØ¯ÙŠÙˆ',
                promptEn: 'Professional portrait of Omani man with confident gaze, wearing light grey dishdasha and black musar, neutral background, studio photography'
            },
            {
                emoji: 'ğŸŒ…',
                titleAr: 'Ø¶ÙˆØ¡ Ø§Ù„ØºØ±ÙˆØ¨',
                titleEn: 'Sunset Light',
                promptAr: 'ØµÙˆØ±Ø© Ù‚Ø±ÙŠØ¨Ø© Ù„Ø±Ø¬Ù„ Ø¹Ù…Ø§Ù†ÙŠ ÙÙŠ Ø¶ÙˆØ¡ Ø§Ù„ØºØ±ÙˆØ¨ Ø§Ù„Ø°Ù‡Ø¨ÙŠØŒ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡ ÙˆÙ…ØµØ± Ø¨Ù†ÙŠØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¯Ø±Ø§Ù…ÙŠØ©',
                promptEn: 'Close-up of Omani man in golden sunset light, wearing white dishdasha and brown musar, dramatic side lighting'
            },
            {
                emoji: 'ğŸ‘”',
                titleAr: 'Ø£Ù†Ø§Ù‚Ø© Ø¹ØµØ±ÙŠØ©',
                titleEn: 'Modern Elegance',
                promptAr: 'ØµÙˆØ±Ø© Ù†ØµÙÙŠØ© Ù„Ø´Ø§Ø¨ Ø¹Ù…Ø§Ù†ÙŠ Ø£Ù†ÙŠÙ‚ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¬ ÙØ§ØªØ­ ÙˆÙ…ØµØ± Ø±Ù…Ø§Ø¯ÙŠØŒ Ø®Ù„ÙÙŠØ© Ø¹ØµØ±ÙŠØ© Ø¨Ø³ÙŠØ·Ø©ØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©',
                promptEn: 'Half-body portrait of elegant young Omani wearing light beige dishdasha and grey musar, modern simple background, professional lighting'
            },
            {
                emoji: 'ğŸŒŸ',
                titleAr: 'Ø¥Ø·Ù„Ø§Ù„Ø© Ù…Ù„ÙƒÙŠØ©',
                titleEn: 'Royal Look',
                promptAr: 'Ø¨ÙˆØ±ØªØ±ÙŠÙ‡ ÙØ®Ù… Ù„Ø±Ø¬Ù„ Ø¹Ù…Ø§Ù†ÙŠ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡ ÙˆÙ…ØµØ± Ù…Ù„ÙƒÙŠ Ø£Ø²Ø±Ù‚ØŒ ÙˆØ¶Ø¹ÙŠØ© Ø±Ø³Ù…ÙŠØ©ØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ©',
                promptEn: 'Luxurious portrait of Omani man wearing white dishdasha and royal blue musar, formal pose, cinematic lighting'
            },
            {
                emoji: 'ğŸ¨',
                titleAr: 'Ø£Ù„ÙˆØ§Ù† Ø§Ù„ØµØ­Ø±Ø§Ø¡',
                titleEn: 'Desert Colors',
                promptAr: 'ØµÙˆØ±Ø© Ù‚Ø±ÙŠØ¨Ø© Ù„Ø±Ø¬Ù„ Ø¹Ù…Ø§Ù†ÙŠ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨Ù†ÙŠØ© ÙˆÙ…ØµØ± Ø¨ÙŠØ¬ØŒ Ø®Ù„ÙÙŠØ© ØµØ­Ø±Ø§ÙˆÙŠØ© Ø¶Ø¨Ø§Ø¨ÙŠØ©ØŒ Ø¶ÙˆØ¡ Ø·Ø¨ÙŠØ¹ÙŠ',
                promptEn: 'Close-up of Omani man wearing brown dishdasha and beige musar, blurred desert background, natural light'
            },
            {
                emoji: 'ğŸ’«',
                titleAr: 'Ø­ÙƒÙ…Ø© ÙˆØ®Ø¨Ø±Ø©',
                titleEn: 'Wisdom & Experience',
                promptAr: 'Ø¨ÙˆØ±ØªØ±ÙŠÙ‡ Ù„Ø±Ø¬Ù„ Ø¹Ù…Ø§Ù†ÙŠ ÙÙŠ Ø§Ù„Ø®Ù…Ø³ÙŠÙ†Ø§Øª Ø¨Ù„Ø­ÙŠØ© Ù…Ù‡Ø°Ø¨Ø©ØŒ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡ ÙˆÙ…ØµØ± ØªÙ‚Ù„ÙŠØ¯ÙŠØŒ Ù†Ø¸Ø±Ø© Ø­ÙƒÙŠÙ…Ø©',
                promptEn: 'Portrait of Omani man in his 50s with neat beard, wearing white dishdasha and traditional musar, wise gaze'
            },
            {
                emoji: 'ğŸŒ™',
                titleAr: 'Ø¥Ø¶Ø§Ø¡Ø© Ù„ÙŠÙ„ÙŠØ©',
                titleEn: 'Night Lighting',
                promptAr: 'ØµÙˆØ±Ø© Ù†ØµÙÙŠØ© Ù„Ø´Ø§Ø¨ Ø¹Ù…Ø§Ù†ÙŠ ÙÙŠ Ø¥Ø¶Ø§Ø¡Ø© Ù„ÙŠÙ„ÙŠØ© Ù†Ø§Ø¹Ù…Ø©ØŒ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡ ÙˆÙ…ØµØ± Ø£Ø³ÙˆØ¯ØŒ Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ø£Ù†ÙŠÙ‚Ø©',
                promptEn: 'Half-body shot of young Omani in soft night lighting, wearing white dishdasha and black musar, elegant dark background'
            },
            {
                emoji: 'â˜€ï¸',
                titleAr: 'ØµØ¨Ø§Ø­ Ù…Ø´Ø±Ù‚',
                titleEn: 'Bright Morning',
                promptAr: 'Ø¨ÙˆØ±ØªØ±ÙŠÙ‡ Ù…Ø´Ø±Ù‚ Ù„Ø±Ø¬Ù„ Ø¹Ù…Ø§Ù†ÙŠ ÙŠØ¨ØªØ³Ù… Ø¨Ø®ÙØ©ØŒ ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡ ÙˆÙ…ØµØ± Ø£Ø¨ÙŠØ¶ØŒ Ø¥Ø¶Ø§Ø¡Ø© ØµØ¨Ø§Ø­ÙŠØ© Ø·Ø¨ÙŠØ¹ÙŠØ©ØŒ Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø©',
                promptEn: 'Bright portrait of Omani man with subtle smile, wearing white dishdasha and white musar, natural morning light, light background'
            }
        ];

        // Prompt Suggestion Functions
        function showSuggestionPopup() {
            const modal = document.getElementById('suggestionModal');
            const isArabic = document.documentElement.dir === 'rtl';
            
            // Select random prompt
            const randomPrompt = suggestedPrompts[Math.floor(Math.random() * suggestedPrompts.length)];
            
            // Update modal content
            const titleElement = modal.querySelector('h3 span');
            const descElement = modal.querySelector('.text-gray-600 span');
            const promptTextElement = document.getElementById('warriorPromptText');
            const categoryElement = modal.querySelector('.text-\\[\\#2C3E50\\] span');
            
            if (titleElement) {
                titleElement.textContent = `${randomPrompt.emoji} ${isArabic ? 'Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ù„Ù‡Ù…' : 'Suggested Prompt'}`;
            }
            if (descElement) {
                descElement.textContent = isArabic ? 'Ø¬Ø±Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ' : 'Try this professional prompt';
            }
            if (categoryElement) {
                categoryElement.textContent = `${randomPrompt.emoji} ${isArabic ? randomPrompt.titleAr : randomPrompt.titleEn}`;
            }
            if (promptTextElement) {
                promptTextElement.textContent = isArabic ? randomPrompt.promptAr : randomPrompt.promptEn;
            }
            
            // Store current prompt for use
            modal.dataset.currentPrompt = isArabic ? randomPrompt.promptAr : randomPrompt.promptEn;
            
            modal.classList.remove('hidden');
            
            // Add animation
            setTimeout(() => {
                const modalContent = modal.querySelector('.bg-white\\/95');
                if (modalContent) {
                    modalContent.style.transform = 'scale(1)';
                }
            }, 10);
        }

        function closeSuggestionModal() {
            const modal = document.getElementById('suggestionModal');
            const modalContent = modal.querySelector('.bg-white\\/95');
            if (modalContent) {
                modalContent.style.transform = 'scale(0.95)';
            }
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 200);
        }

        function useSuggestedPrompt() {
            const modal = document.getElementById('suggestionModal');
            const promptText = modal.dataset.currentPrompt || "ØµÙˆØ±Ø© Ù‚Ø±ÙŠØ¨Ø© Ù„ÙˆØ¬Ù‡ Ø±Ø¬Ù„ Ø¹Ù…Ø§Ù†ÙŠ ÙˆØ³ÙŠÙ… ÙŠØ±ØªØ¯ÙŠ Ø¯Ø´Ø¯Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡ Ù†Ø§ØµØ¹Ø© ÙˆÙ…ØµØ± Ø£Ø­Ù…Ø± ØªÙ‚Ù„ÙŠØ¯ÙŠØŒ Ø¥Ø¶Ø§Ø¡Ø© Ø·Ø¨ÙŠØ¹ÙŠØ© Ù†Ø§Ø¹Ù…Ø©ØŒ Ø®Ù„ÙÙŠØ© Ø¨Ø³ÙŠØ·Ø©";
            const descriptionTextarea = document.getElementById('description');
            
            if (descriptionTextarea) {
                descriptionTextarea.value = promptText;
                descriptionTextarea.focus();
                
                // Add a subtle highlight animation
                descriptionTextarea.style.borderColor = '#f59e0b';
                descriptionTextarea.style.boxShadow = '0 0 0 3px rgba(245, 158, 11, 0.1)';
                
                setTimeout(() => {
                    descriptionTextarea.style.borderColor = '';
                    descriptionTextarea.style.boxShadow = '';
                }, 2000);
            }
            
            closeSuggestionModal();
            
            // Show success message
            if (window.app) {
                window.app.showMessage(
                    document.documentElement.dir === 'rtl' 
                        ? 'ØªÙ… Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„ÙŠÙ‡ Ø£Ùˆ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¨Ø§Ø´Ø±Ø©' 
                        : 'Suggestion added! You can modify it or generate directly',
                    'success'
                );
            }
        }

        // Close suggestion modal on backdrop click
        document.getElementById('suggestionModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSuggestionModal();
            }
        });

        // History Management Functions
        function copyPromptToClipboard(prompt, imageId, event) {
            const button = event?.currentTarget || event?.target?.closest('button');
            copyToClipboard(prompt, button);
            
            // Visual feedback - highlight the copied item briefly
            const gridItem = document.querySelector(`[onclick*="${imageId}"]`)?.closest('.group');
            if (gridItem) {
                gridItem.style.transform = 'scale(1.02)';
                gridItem.style.boxShadow = '0 0 20px rgba(59, 130, 246, 0.3)';
                setTimeout(() => {
                    gridItem.style.transform = '';
                    gridItem.style.boxShadow = '';
                }, 500);
            }
        }

        function downloadHistoryImage(imageUrl, prompt) {
            try {
                // Use the global download function
                window.downloadImageByUrl(imageUrl, prompt);
                
                // Show success message
                if (window.app) {
                    const isArabic = document.documentElement.dir === 'rtl';
                    window.app.showMessage(
                        isArabic ? 'Ø¨Ø¯Ø£ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©!' : 'Image download started!',
                        'success'
                    );
                }
            } catch (error) {
                console.error('Failed to download image:', error);
                if (window.app) {
                    const isArabic = document.documentElement.dir === 'rtl';
                    window.app.showMessage(
                        isArabic ? 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©' : 'Failed to download image',
                        'error'
                    );
                }
            }
        }

        async function deleteHistoryImage(imageId) {
            const isArabic = document.documentElement.dir === 'rtl';
            
            // Confirm deletion
            const confirmMessage = isArabic 
                ? 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø©ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.'
                : 'Are you sure you want to delete this image? This action cannot be undone.';
                
            if (!confirm(confirmMessage)) {
                return;
            }
            
            try {
                const response = await fetch(`/api/history/${imageId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${window.app?.clerk?.session?.getToken()}`,
                    }
                });
                
                if (response.ok) {
                    // Remove from UI immediately
                    const gridItem = document.querySelector(`[onclick*="${imageId}"]`)?.closest('.group');
                    if (gridItem) {
                        gridItem.style.transform = 'scale(0.8)';
                        gridItem.style.opacity = '0';
                        setTimeout(() => {
                            gridItem.remove();
                        }, 300);
                    }
                    
                    // Show success message
                    if (window.app) {
                        window.app.showMessage(
                            isArabic ? 'ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­' : 'Image deleted successfully',
                            'success'
                        );
                    }
                    
                    // Reload history after a delay to sync with server
                    setTimeout(() => {
                        if (window.app) {
                            window.app.loadUserHistory();
                        }
                    }, 1000);
                } else {
                    throw new Error('Failed to delete image');
                }
            } catch (error) {
                console.error('Failed to delete image:', error);
                if (window.app) {
                    window.app.showMessage(
                        isArabic ? 'ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©' : 'Failed to delete image',
                        'error'
                    );
                }
            }
        }

        // Global image download function
        window.downloadImageByUrl = async function(url, prompt) {
            try {
                // Get extension from URL
                let ext = 'webp';
                const match = url.match(/\.([a-zA-Z0-9]+)(\?|$)/);
                if (match) ext = match[1];
                // Clean prompt for filename
                let name = prompt ? prompt.replace(/[^a-zA-Z0-9\u0600-\u06FF]+/g, '_').slice(0, 40) : 'omani_clothing';
                let filename = `${name}_${Date.now()}.${ext}`;
                // Fetch image as blob
                const response = await fetch(url);
                const blob = await response.blob();
                // Create download link
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                setTimeout(() => URL.revokeObjectURL(link.href), 1000);
            } catch (err) {
                alert('Failed to download image');
            }
        }

        // Initialize the app
        const app = new OmaniAI();
        window.app = app;
    </script>
</body>
</html>
